
CREATE TYPE [AccountNumber]
	FROM NVARCHAR(15) NULL
go

CREATE TYPE [Flag]
	FROM BIT NOT NULL
go

CREATE TYPE [NameStyle]
	FROM BIT NOT NULL
go

CREATE TYPE [Name]
	FROM NVARCHAR(50) NULL
go

CREATE TYPE [OrderNumber]
	FROM NVARCHAR(25) NULL
go

CREATE TYPE [Phone]
	FROM NVARCHAR(25) NULL
go

CREATE TABLE [Address]
( 
	[AddressID]          int  IDENTITY ( 1,1 ) NOT FOR REPLICATION  NOT NULL ,
	[AddressLine1]       nvarchar(60) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[AddressLine2]       nvarchar(60) COLLATE SQL_Latin1_General_CP1_CI_AS  NULL ,
	[City]               nvarchar(30) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[StateProvinceID]    int  NOT NULL ,
	[PostalCode]         nvarchar(15) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[SpatialLocation]    geography  NULL ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_Address_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_Address_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [AddressType]
( 
	[AddressTypeID]      int  IDENTITY ( 1,1 )  NOT NULL ,
	[Name]               [Name]  NOT NULL ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_AddressType_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_AddressType_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [BusinessEntity]
( 
	[BusinessEntityID]   int  IDENTITY ( 1,1 ) NOT FOR REPLICATION  NOT NULL ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_BusinessEntity_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_BusinessEntity_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [BusinessEntityAddress]
( 
	[BusinessEntityID]   int  NOT NULL ,
	[AddressID]          int  NOT NULL ,
	[AddressTypeID]      int  NOT NULL ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_BusinessEntityAddress_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_BusinessEntityAddress_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [BusinessEntityContact]
( 
	[BusinessEntityID]   int  NOT NULL ,
	[PersonID]           int  NOT NULL ,
	[ContactTypeID]      int  NOT NULL ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_BusinessEntityContact_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_BusinessEntityContact_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [ContactType]
( 
	[ContactTypeID]      int  IDENTITY ( 1,1 )  NOT NULL ,
	[Name]               [Name]  NOT NULL ,
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_ContactType_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [CountryRegion]
( 
	[CountryRegionCode]  nvarchar(3) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[Name]               [Name]  NOT NULL ,
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_CountryRegion_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [CountryRegionCurrency]
( 
	[CountryRegionCode]  nvarchar(3) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[CurrencyCode]       nchar(3) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_CountryRegionCurrency_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [CreditCard]
( 
	[CreditCardID]       int  IDENTITY ( 1,1 )  NOT NULL ,
	[CardType]           nvarchar(50) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[CardNumber]         nvarchar(25) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[ExpMonth]           tinyint  NOT NULL ,
	[ExpYear]            smallint  NOT NULL ,
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_CreditCard_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [Currency]
( 
	[CurrencyCode]       nchar(3) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[Name]               [Name]  NOT NULL ,
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_Currency_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [Currency1]
( 
	[CurrencyCode]       nchar(3) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[Name]               [Name]  NOT NULL ,
	[ModifiedDate]       datetime  NOT NULL 
)
go

CREATE TABLE [CurrencyRate]
( 
	[CurrencyRateID]     int  IDENTITY ( 1,1 )  NOT NULL ,
	[CurrencyRateDate]   datetime  NOT NULL ,
	[FromCurrencyCode]   nchar(3) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[ToCurrencyCode]     nchar(3) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[AverageRate]        money  NOT NULL ,
	[EndOfDayRate]       money  NOT NULL ,
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_CurrencyRate_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [Customer]
( 
	[CustomerID]         int  IDENTITY ( 1,1 ) NOT FOR REPLICATION  NOT NULL ,
	[PersonID]           int  NULL ,
	[StoreID]            int  NULL ,
	[TerritoryID]        int  NULL ,
	[AccountNumber]      AS (isnull('AW'+[dbo].[ufnLeadingZeros]([CustomerID]),'')) COLLATE SQL_Latin1_General_CP1_CI_AS ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_Customer_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_Customer_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [EmailAddress]
( 
	[BusinessEntityID]   int  NOT NULL ,
	[EmailAddressID]     int  IDENTITY ( 1,1 )  NOT NULL ,
	[EmailAddress]       nvarchar(50) COLLATE SQL_Latin1_General_CP1_CI_AS  NULL ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_EmailAddress_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_EmailAddress_ModifiedDate]
		 DEFAULT  getdate(),
	[secondarymail]      char(18) COLLATE SQL_Latin1_General_CP1_CI_AS  NULL 
)
go

CREATE TABLE [emails]
( 
	[id]                 char(18)  NULL ,
	[test_table_col1]    char(18) COLLATE SQL_Latin1_General_CP1_CI_AS  NULL 
)
go

CREATE TABLE [Password]
( 
	[BusinessEntityID]   int  NOT NULL ,
	[PasswordHash]       varchar(128) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[PasswordSalt]       varchar(10) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_Password_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_Password_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [Person]
( 
	[BusinessEntityID]   int  NOT NULL ,
	[PersonType]         nchar(2) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[NameStyle]          [NameStyle]  NOT NULL 
	CONSTRAINT [DF_Person_NameStyle]
		 DEFAULT  0,
	[Title]              nvarchar(8) COLLATE SQL_Latin1_General_CP1_CI_AS  NULL ,
	[FirstName]          [Name]  NOT NULL ,
	[MiddleName]         [Name]  NULL ,
	[LastName]           [Name]  NOT NULL ,
	[Suffix]             nvarchar(10) COLLATE SQL_Latin1_General_CP1_CI_AS  NULL ,
	[EmailPromotion]     int  NOT NULL 
	CONSTRAINT [DF_Person_EmailPromotion]
		 DEFAULT  0,
	[AdditionalContactInfo] xml ( CONTENT [AdditionalContactInfoSchemaCollection] ) NULL ,
	[Demographics]       xml ( CONTENT [IndividualSurveySchemaCollection] ) NULL ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_Person_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_Person_ModifiedDate]
		 DEFAULT  getdate(),
	[test_col]           nchar(10) COLLATE SQL_Latin1_General_CP1_CI_AS  NULL 
)
go

ALTER TABLE [Person]
	 WITH CHECK ADD CONSTRAINT [CK_Person_PersonType] CHECK  ( [PersonType] IS NULL OR (upper([PersonType])='GC' OR upper([PersonType])='SP' OR upper([PersonType])='EM' OR upper([PersonType])='IN' OR upper([PersonType])='VC' OR upper([PersonType])='SC') )
go

ALTER TABLE [Person]
	 WITH CHECK ADD CONSTRAINT [CK_Person_EmailPromotion] CHECK  ( EmailPromotion BETWEEN 0 AND 2 )
go

CREATE TABLE [PersonCreditCard]
( 
	[BusinessEntityID]   int  NOT NULL ,
	[CreditCardID]       int  NOT NULL ,
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_PersonCreditCard_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [PersonPhone]
( 
	[BusinessEntityID]   int  NOT NULL ,
	[PhoneNumber]        [Phone]  NOT NULL ,
	[PhoneNumberTypeID]  int  NOT NULL ,
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_PersonPhone_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [PhoneNumberType]
( 
	[PhoneNumberTypeID]  int  IDENTITY ( 1,1 )  NOT NULL ,
	[Name]               [Name]  NOT NULL ,
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_PhoneNumberType_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [SalesOrderDetail]
( 
	[SalesOrderID]       int  NOT NULL ,
	[SalesOrderDetailID] int  IDENTITY ( 1,1 )  NOT NULL ,
	[CarrierTrackingNumber] nvarchar(25) COLLATE SQL_Latin1_General_CP1_CI_AS  NULL ,
	[OrderQty]           smallint  NOT NULL ,
	[ProductID]          int  NOT NULL ,
	[SpecialOfferID]     int  NOT NULL ,
	[UnitPrice]          money  NOT NULL ,
	[UnitPriceDiscount]  money  NOT NULL 
	CONSTRAINT [DF_SalesOrderDetail_UnitPriceDiscount]
		 DEFAULT  0.0,
	[LineTotal]          AS (isnull(([UnitPrice]*((1.0)-[UnitPriceDiscount]))*[OrderQty],(0.0))) ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_SalesOrderDetail_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_SalesOrderDetail_ModifiedDate]
		 DEFAULT  getdate()
)
go

ALTER TABLE [SalesOrderDetail]
	 WITH CHECK ADD CONSTRAINT [CK_SalesOrderDetail_OrderQty] CHECK  ( [OrderQty]>(0) )
go

ALTER TABLE [SalesOrderDetail]
	 WITH CHECK ADD CONSTRAINT [CK_SalesOrderDetail_UnitPrice] CHECK  ( UnitPrice >= 0.00 )
go

ALTER TABLE [SalesOrderDetail]
	 WITH CHECK ADD CONSTRAINT [CK_SalesOrderDetail_UnitPriceDiscount] CHECK  ( UnitPriceDiscount >= 0.00 )
go

CREATE TABLE [SalesOrderHeader]
( 
	[SalesOrderID]       int  IDENTITY ( 1,1 ) NOT FOR REPLICATION  NOT NULL ,
	[RevisionNumber]     tinyint  NOT NULL 
	CONSTRAINT [DF_SalesOrderHeader_RevisionNumber]
		 DEFAULT  0,
	[OrderDate]          datetime  NOT NULL 
	CONSTRAINT [DF_SalesOrderHeader_OrderDate]
		 DEFAULT  getdate(),
	[DueDate]            datetime  NOT NULL ,
	[ShipDate]           datetime  NULL ,
	[Status]             tinyint  NOT NULL 
	CONSTRAINT [DF_SalesOrderHeader_Status]
		 DEFAULT  1,
	[OnlineOrderFlag]    [Flag]  NOT NULL 
	CONSTRAINT [DF_SalesOrderHeader_OnlineOrderFlag]
		 DEFAULT  1,
	[SalesOrderNumber]   AS (isnull(N'SO'+CONVERT([nvarchar](23),[SalesOrderID]),N'*** ERROR ***')) COLLATE SQL_Latin1_General_CP1_CI_AS ,
	[PurchaseOrderNumber] [OrderNumber]  NULL ,
	[AccountNumber]      [AccountNumber]  NULL ,
	[CustomerID]         int  NOT NULL ,
	[SalesPersonID]      int  NULL ,
	[TerritoryID]        int  NULL ,
	[BillToAddressID]    int  NOT NULL ,
	[ShipToAddressID]    int  NOT NULL ,
	[ShipMethodID]       int  NOT NULL ,
	[CreditCardID]       int  NULL ,
	[CreditCardApprovalCode] varchar(15) COLLATE SQL_Latin1_General_CP1_CI_AS  NULL ,
	[CurrencyRateID]     int  NULL ,
	[SubTotal]           money  NOT NULL 
	CONSTRAINT [DF_SalesOrderHeader_SubTotal]
		 DEFAULT  0.00,
	[TaxAmt]             money  NOT NULL 
	CONSTRAINT [DF_SalesOrderHeader_TaxAmt]
		 DEFAULT  0.00,
	[Freight]            money  NOT NULL 
	CONSTRAINT [DF_SalesOrderHeader_Freight]
		 DEFAULT  0.00,
	[TotalDue]           AS (isnull(([SubTotal]+[TaxAmt])+[Freight],(0))) ,
	[Comment]            nvarchar(128) COLLATE SQL_Latin1_General_CP1_CI_AS  NULL ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_SalesOrderHeader_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_SalesOrderHeader_ModifiedDate]
		 DEFAULT  getdate()
)
go

ALTER TABLE [SalesOrderHeader]
	 WITH CHECK ADD CONSTRAINT [CK_SalesOrderHeader_Status] CHECK  ( Status BETWEEN 0 AND 8 )
go

ALTER TABLE [SalesOrderHeader]
	 WITH CHECK ADD CONSTRAINT [CK_SalesOrderHeader_SubTotal] CHECK  ( SubTotal >= 0.00 )
go

ALTER TABLE [SalesOrderHeader]
	 WITH CHECK ADD CONSTRAINT [CK_SalesOrderHeader_TaxAmt] CHECK  ( TaxAmt >= 0.00 )
go

ALTER TABLE [SalesOrderHeader]
	 WITH CHECK ADD CONSTRAINT [CK_SalesOrderHeader_Freight] CHECK  ( Freight >= 0.00 )
go

CREATE TABLE [SalesOrderHeaderSalesReason]
( 
	[SalesOrderID]       int  NOT NULL ,
	[SalesReasonID]      int  NOT NULL ,
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_SalesOrderHeaderSalesReason_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [SalesPerson]
( 
	[BusinessEntityID]   int  NOT NULL ,
	[TerritoryID]        int  NULL ,
	[SalesQuota]         money  NULL ,
	[Bonus]              money  NOT NULL 
	CONSTRAINT [DF_SalesPerson_Bonus]
		 DEFAULT  0.00,
	[CommissionPct]      smallmoney  NOT NULL 
	CONSTRAINT [DF_SalesPerson_CommissionPct]
		 DEFAULT  0.00,
	[SalesYTD]           money  NOT NULL 
	CONSTRAINT [DF_SalesPerson_SalesYTD]
		 DEFAULT  0.00,
	[SalesLastYear]      money  NOT NULL 
	CONSTRAINT [DF_SalesPerson_SalesLastYear]
		 DEFAULT  0.00,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_SalesPerson_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_SalesPerson_ModifiedDate]
		 DEFAULT  getdate()
)
go

ALTER TABLE [SalesPerson]
	 WITH CHECK ADD CONSTRAINT [CK_SalesPerson_SalesQuota] CHECK  ( [SalesQuota]>(0.00) )
go

ALTER TABLE [SalesPerson]
	 WITH CHECK ADD CONSTRAINT [CK_SalesPerson_Bonus] CHECK  ( Bonus >= 0.00 )
go

ALTER TABLE [SalesPerson]
	 WITH CHECK ADD CONSTRAINT [CK_SalesPerson_CommissionPct] CHECK  ( CommissionPct >= 0.00 )
go

ALTER TABLE [SalesPerson]
	 WITH CHECK ADD CONSTRAINT [CK_SalesPerson_SalesYTD] CHECK  ( SalesYTD >= 0.00 )
go

ALTER TABLE [SalesPerson]
	 WITH CHECK ADD CONSTRAINT [CK_SalesPerson_SalesLastYear] CHECK  ( SalesLastYear >= 0.00 )
go

CREATE TABLE [SalesPersonQuotaHistory]
( 
	[BusinessEntityID]   int  NOT NULL ,
	[QuotaDate]          datetime  NOT NULL ,
	[SalesQuota]         money  NOT NULL ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_SalesPersonQuotaHistory_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_SalesPersonQuotaHistory_ModifiedDate]
		 DEFAULT  getdate()
)
go

ALTER TABLE [SalesPersonQuotaHistory]
	 WITH CHECK ADD CONSTRAINT [CK_SalesPersonQuotaHistory_SalesQuota] CHECK  ( [SalesQuota]>(0.00) )
go

CREATE TABLE [SalesReason]
( 
	[SalesReasonID]      int  IDENTITY ( 1,1 )  NOT NULL ,
	[Name]               [Name]  NOT NULL ,
	[ReasonType]         [Name]  NOT NULL ,
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_SalesReason_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [SalesTaxRate]
( 
	[SalesTaxRateID]     int  IDENTITY ( 1,1 )  NOT NULL ,
	[StateProvinceID]    int  NOT NULL ,
	[TaxType]            tinyint  NOT NULL ,
	[TaxRate]            smallmoney  NOT NULL 
	CONSTRAINT [DF_SalesTaxRate_TaxRate]
		 DEFAULT  0.00,
	[Name]               [Name]  NOT NULL ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_SalesTaxRate_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_SalesTaxRate_ModifiedDate]
		 DEFAULT  getdate()
)
go

ALTER TABLE [SalesTaxRate]
	 WITH CHECK ADD CONSTRAINT [CK_SalesTaxRate_TaxType] CHECK  ( TaxType BETWEEN 1 AND 3 )
go

CREATE TABLE [SalesTerritory]
( 
	[TerritoryID]        int  IDENTITY ( 1,1 )  NOT NULL ,
	[Name]               [Name]  NOT NULL ,
	[CountryRegionCode]  nvarchar(3) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[Group]              nvarchar(50) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[SalesYTD]           money  NOT NULL 
	CONSTRAINT [DF_SalesTerritory_SalesYTD]
		 DEFAULT  0.00,
	[SalesLastYear]      money  NOT NULL 
	CONSTRAINT [DF_SalesTerritory_SalesLastYear]
		 DEFAULT  0.00,
	[CostYTD]            money  NOT NULL 
	CONSTRAINT [DF_SalesTerritory_CostYTD]
		 DEFAULT  0.00,
	[CostLastYear]       money  NOT NULL 
	CONSTRAINT [DF_SalesTerritory_CostLastYear]
		 DEFAULT  0.00,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_SalesTerritory_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_SalesTerritory_ModifiedDate]
		 DEFAULT  getdate()
)
go

ALTER TABLE [SalesTerritory]
	 WITH CHECK ADD CONSTRAINT [CK_SalesTerritory_SalesYTD] CHECK  ( SalesYTD >= 0.00 )
go

ALTER TABLE [SalesTerritory]
	 WITH CHECK ADD CONSTRAINT [CK_SalesTerritory_SalesLastYear] CHECK  ( SalesLastYear >= 0.00 )
go

ALTER TABLE [SalesTerritory]
	 WITH CHECK ADD CONSTRAINT [CK_SalesTerritory_CostYTD] CHECK  ( CostYTD >= 0.00 )
go

ALTER TABLE [SalesTerritory]
	 WITH CHECK ADD CONSTRAINT [CK_SalesTerritory_CostLastYear] CHECK  ( CostLastYear >= 0.00 )
go

CREATE TABLE [SalesTerritoryHistory]
( 
	[BusinessEntityID]   int  NOT NULL ,
	[TerritoryID]        int  NOT NULL ,
	[StartDate]          datetime  NOT NULL ,
	[EndDate]            datetime  NULL ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_SalesTerritoryHistory_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_SalesTerritoryHistory_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [ShoppingCartItem]
( 
	[ShoppingCartItemID] int  IDENTITY ( 1,1 )  NOT NULL ,
	[ShoppingCartID]     nvarchar(50) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[Quantity]           int  NOT NULL 
	CONSTRAINT [DF_ShoppingCartItem_Quantity]
		 DEFAULT  1,
	[ProductID]          int  NOT NULL ,
	[DateCreated]        datetime  NOT NULL 
	CONSTRAINT [DF_ShoppingCartItem_DateCreated]
		 DEFAULT  getdate(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_ShoppingCartItem_ModifiedDate]
		 DEFAULT  getdate()
)
go

ALTER TABLE [ShoppingCartItem]
	 WITH CHECK ADD CONSTRAINT [CK_ShoppingCartItem_Quantity] CHECK  ( Quantity >= 1 )
go

CREATE TABLE [SpecialOffer]
( 
	[SpecialOfferID]     int  IDENTITY ( 1,1 )  NOT NULL ,
	[Description]        nvarchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[DiscountPct]        smallmoney  NOT NULL 
	CONSTRAINT [DF_SpecialOffer_DiscountPct]
		 DEFAULT  0.00,
	[Type]               nvarchar(50) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[Category]           nvarchar(50) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[StartDate]          datetime  NOT NULL ,
	[EndDate]            datetime  NOT NULL ,
	[MinQty]             int  NOT NULL 
	CONSTRAINT [DF_SpecialOffer_MinQty]
		 DEFAULT  0,
	[MaxQty]             int  NULL ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_SpecialOffer_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_SpecialOffer_ModifiedDate]
		 DEFAULT  getdate()
)
go

ALTER TABLE [SpecialOffer]
	 WITH CHECK ADD CONSTRAINT [CK_SpecialOffer_DiscountPct] CHECK  ( DiscountPct >= 0.00 )
go

ALTER TABLE [SpecialOffer]
	 WITH CHECK ADD CONSTRAINT [CK_SpecialOffer_MinQty] CHECK  ( MinQty >= 0 )
go

ALTER TABLE [SpecialOffer]
	 WITH CHECK ADD CONSTRAINT [CK_SpecialOffer_MaxQty] CHECK  ( MaxQty >= 0 )
go

CREATE TABLE [SpecialOfferProduct]
( 
	[SpecialOfferID]     int  NOT NULL ,
	[ProductID]          int  NOT NULL ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_SpecialOfferProduct_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_SpecialOfferProduct_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [StateProvince]
( 
	[StateProvinceID]    int  IDENTITY ( 1,1 )  NOT NULL ,
	[StateProvinceCode]  nchar(3) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[CountryRegionCode]  nvarchar(3) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[IsOnlyStateProvinceFlag] [Flag]  NOT NULL 
	CONSTRAINT [DF_StateProvince_IsOnlyStateProvinceFlag]
		 DEFAULT  1,
	[Name]               [Name]  NOT NULL ,
	[TerritoryID]        int  NOT NULL ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_StateProvince_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_StateProvince_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [Store]
( 
	[BusinessEntityID]   int  NOT NULL ,
	[Name]               [Name]  NOT NULL ,
	[SalesPersonID]      int  NULL ,
	[Demographics]       xml ( CONTENT [StoreSurveySchemaCollection] ) NULL ,
	[rowguid]            uniqueidentifier  ROWGUIDCOL  NOT NULL 
	CONSTRAINT [DF_Store_rowguid]
		 DEFAULT  newid(),
	[ModifiedDate]       datetime  NOT NULL 
	CONSTRAINT [DF_Store_ModifiedDate]
		 DEFAULT  getdate()
)
go

CREATE TABLE [test_table]
( 
	[test_table_col1]    char(18) COLLATE SQL_Latin1_General_CP1_CI_AS  NOT NULL ,
	[new_col]            char(20)  NULL 
)
go

ALTER TABLE [Address]
	ADD CONSTRAINT [PK_Address_AddressID] PRIMARY KEY  CLUSTERED ([AddressID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_Address_rowguid] ON [Address]
( 
	[rowguid]             ASC
)
go

CREATE UNIQUE NONCLUSTERED INDEX [IX_Address_AddressLine1_AddressLine2_City_StateProvinceID_PostalCode] ON [Address]
( 
	[AddressLine1]        ASC,
	[AddressLine2]        ASC,
	[City]                ASC,
	[StateProvinceID]     ASC,
	[PostalCode]          ASC
)
go

ALTER TABLE [AddressType]
	ADD CONSTRAINT [PK_AddressType_AddressTypeID] PRIMARY KEY  CLUSTERED ([AddressTypeID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_AddressType_rowguid] ON [AddressType]
( 
	[rowguid]             ASC
)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_AddressType_Name] ON [AddressType]
( 
	[Name]                ASC
)
go

ALTER TABLE [BusinessEntity]
	ADD CONSTRAINT [PK_BusinessEntity_BusinessEntityID] PRIMARY KEY  CLUSTERED ([BusinessEntityID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_BusinessEntity_rowguid] ON [BusinessEntity]
( 
	[rowguid]             ASC
)
go

ALTER TABLE [BusinessEntityAddress]
	ADD CONSTRAINT [PK_BusinessEntityAddress_BusinessEntityID_AddressID_AddressTypeID] PRIMARY KEY  CLUSTERED ([BusinessEntityID] ASC,[AddressID] ASC,[AddressTypeID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_BusinessEntityAddress_rowguid] ON [BusinessEntityAddress]
( 
	[rowguid]             ASC
)
go

ALTER TABLE [BusinessEntityContact]
	ADD CONSTRAINT [PK_BusinessEntityContact_BusinessEntityID_PersonID_ContactTypeID] PRIMARY KEY  CLUSTERED ([BusinessEntityID] ASC,[PersonID] ASC,[ContactTypeID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_BusinessEntityContact_rowguid] ON [BusinessEntityContact]
( 
	[rowguid]             ASC
)
go

ALTER TABLE [ContactType]
	ADD CONSTRAINT [PK_ContactType_ContactTypeID] PRIMARY KEY  CLUSTERED ([ContactTypeID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_ContactType_Name] ON [ContactType]
( 
	[Name]                ASC
)
go

ALTER TABLE [CountryRegion]
	ADD CONSTRAINT [PK_CountryRegion_CountryRegionCode] PRIMARY KEY  CLUSTERED ([CountryRegionCode] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_CountryRegion_Name] ON [CountryRegion]
( 
	[Name]                ASC
)
go

ALTER TABLE [CountryRegionCurrency]
	ADD CONSTRAINT [PK_CountryRegionCurrency_CountryRegionCode_CurrencyCode] PRIMARY KEY  CLUSTERED ([CountryRegionCode] ASC,[CurrencyCode] ASC)
go

ALTER TABLE [CreditCard]
	ADD CONSTRAINT [PK_CreditCard_CreditCardID] PRIMARY KEY  CLUSTERED ([CreditCardID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_CreditCard_CardNumber] ON [CreditCard]
( 
	[CardNumber]          ASC
)
go

ALTER TABLE [Currency]
	ADD CONSTRAINT [PK_Currency_CurrencyCode] PRIMARY KEY  CLUSTERED ([CurrencyCode] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_Currency_Name] ON [Currency]
( 
	[Name]                ASC
)
go

ALTER TABLE [Currency1]
	ADD CONSTRAINT [PK_Currency_CurrencyCode1] PRIMARY KEY  CLUSTERED ([CurrencyCode] ASC)
go

ALTER TABLE [CurrencyRate]
	ADD CONSTRAINT [PK_CurrencyRate_CurrencyRateID] PRIMARY KEY  CLUSTERED ([CurrencyRateID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_CurrencyRate_CurrencyRateDate_FromCurrencyCode_ToCurrencyCode] ON [CurrencyRate]
( 
	[CurrencyRateDate]    ASC,
	[FromCurrencyCode]    ASC,
	[ToCurrencyCode]      ASC
)
go

ALTER TABLE [Customer]
	ADD CONSTRAINT [PK_Customer_CustomerID] PRIMARY KEY  CLUSTERED ([CustomerID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_Customer_rowguid] ON [Customer]
( 
	[rowguid]             ASC
)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_Customer_AccountNumber] ON [Customer]
( 
	[AccountNumber]       ASC
)
go

ALTER TABLE [EmailAddress]
	ADD CONSTRAINT [PK_EmailAddress_BusinessEntityID_EmailAddressID] PRIMARY KEY  CLUSTERED ([BusinessEntityID] ASC,[EmailAddressID] ASC)
go

CREATE NONCLUSTERED INDEX [IX_EmailAddress_EmailAddress] ON [EmailAddress]
( 
	[EmailAddress]        ASC
)
go

ALTER TABLE [Password]
	ADD CONSTRAINT [PK_Password_BusinessEntityID] PRIMARY KEY  CLUSTERED ([BusinessEntityID] ASC)
go

ALTER TABLE [Person]
	ADD CONSTRAINT [PK_Person_BusinessEntityID] PRIMARY KEY  CLUSTERED ([BusinessEntityID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_Person_rowguid] ON [Person]
( 
	[rowguid]             ASC
)
go

CREATE NONCLUSTERED INDEX [IX_Person_LastName_FirstName_MiddleName] ON [Person]
( 
	[LastName]            ASC,
	[FirstName]           ASC,
	[MiddleName]          ASC
)
go

ALTER TABLE [PersonCreditCard]
	ADD CONSTRAINT [PK_PersonCreditCard_BusinessEntityID_CreditCardID] PRIMARY KEY  CLUSTERED ([BusinessEntityID] ASC,[CreditCardID] ASC)
go

ALTER TABLE [PersonPhone]
	ADD CONSTRAINT [PK_PersonPhone_BusinessEntityID_PhoneNumber_PhoneNumberTypeID] PRIMARY KEY  CLUSTERED ([BusinessEntityID] ASC,[PhoneNumber] ASC,[PhoneNumberTypeID] ASC)
go

CREATE NONCLUSTERED INDEX [IX_PersonPhone_PhoneNumber] ON [PersonPhone]
( 
	[PhoneNumber]         ASC
)
go

ALTER TABLE [PhoneNumberType]
	ADD CONSTRAINT [PK_PhoneNumberType_PhoneNumberTypeID] PRIMARY KEY  CLUSTERED ([PhoneNumberTypeID] ASC)
go

ALTER TABLE [SalesOrderDetail]
	ADD CONSTRAINT [PK_SalesOrderDetail_SalesOrderID_SalesOrderDetailID] PRIMARY KEY  CLUSTERED ([SalesOrderID] ASC,[SalesOrderDetailID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_SalesOrderDetail_rowguid] ON [SalesOrderDetail]
( 
	[rowguid]             ASC
)
go

CREATE NONCLUSTERED INDEX [IX_SalesOrderDetail_ProductID] ON [SalesOrderDetail]
( 
	[ProductID]           ASC
)
go

ALTER TABLE [SalesOrderHeader]
	ADD CONSTRAINT [PK_SalesOrderHeader_SalesOrderID] PRIMARY KEY  CLUSTERED ([SalesOrderID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_SalesOrderHeader_rowguid] ON [SalesOrderHeader]
( 
	[rowguid]             ASC
)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_SalesOrderHeader_SalesOrderNumber] ON [SalesOrderHeader]
( 
	[SalesOrderNumber]    ASC
)
go

ALTER TABLE [SalesOrderHeaderSalesReason]
	ADD CONSTRAINT [PK_SalesOrderHeaderSalesReason_SalesOrderID_SalesReasonID] PRIMARY KEY  CLUSTERED ([SalesOrderID] ASC,[SalesReasonID] ASC)
go

ALTER TABLE [SalesPerson]
	ADD CONSTRAINT [PK_SalesPerson_BusinessEntityID] PRIMARY KEY  CLUSTERED ([BusinessEntityID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_SalesPerson_rowguid] ON [SalesPerson]
( 
	[rowguid]             ASC
)
go

ALTER TABLE [SalesPersonQuotaHistory]
	ADD CONSTRAINT [PK_SalesPersonQuotaHistory_BusinessEntityID_QuotaDate] PRIMARY KEY  CLUSTERED ([BusinessEntityID] ASC,[QuotaDate] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_SalesPersonQuotaHistory_rowguid] ON [SalesPersonQuotaHistory]
( 
	[rowguid]             ASC
)
go

ALTER TABLE [SalesReason]
	ADD CONSTRAINT [PK_SalesReason_SalesReasonID] PRIMARY KEY  CLUSTERED ([SalesReasonID] ASC)
go

ALTER TABLE [SalesTaxRate]
	ADD CONSTRAINT [PK_SalesTaxRate_SalesTaxRateID] PRIMARY KEY  CLUSTERED ([SalesTaxRateID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_SalesTaxRate_StateProvinceID_TaxType] ON [SalesTaxRate]
( 
	[StateProvinceID]     ASC,
	[TaxType]             ASC
)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_SalesTaxRate_rowguid] ON [SalesTaxRate]
( 
	[rowguid]             ASC
)
go

ALTER TABLE [SalesTerritory]
	ADD CONSTRAINT [PK_SalesTerritory_TerritoryID] PRIMARY KEY  CLUSTERED ([TerritoryID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_SalesTerritory_Name] ON [SalesTerritory]
( 
	[Name]                ASC
)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_SalesTerritory_rowguid] ON [SalesTerritory]
( 
	[rowguid]             ASC
)
go

ALTER TABLE [SalesTerritoryHistory]
	ADD CONSTRAINT [PK_SalesTerritoryHistory_BusinessEntityID_StartDate_TerritoryID] PRIMARY KEY  CLUSTERED ([BusinessEntityID] ASC,[StartDate] ASC,[TerritoryID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_SalesTerritoryHistory_rowguid] ON [SalesTerritoryHistory]
( 
	[rowguid]             ASC
)
go

ALTER TABLE [ShoppingCartItem]
	ADD CONSTRAINT [PK_ShoppingCartItem_ShoppingCartItemID] PRIMARY KEY  CLUSTERED ([ShoppingCartItemID] ASC)
go

CREATE NONCLUSTERED INDEX [IX_ShoppingCartItem_ShoppingCartID_ProductID] ON [ShoppingCartItem]
( 
	[ShoppingCartID]      ASC,
	[ProductID]           ASC
)
go

ALTER TABLE [SpecialOffer]
	ADD CONSTRAINT [PK_SpecialOffer_SpecialOfferID] PRIMARY KEY  CLUSTERED ([SpecialOfferID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_SpecialOffer_rowguid] ON [SpecialOffer]
( 
	[rowguid]             ASC
)
go

ALTER TABLE [SpecialOfferProduct]
	ADD CONSTRAINT [PK_SpecialOfferProduct_SpecialOfferID_ProductID] PRIMARY KEY  CLUSTERED ([SpecialOfferID] ASC,[ProductID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_SpecialOfferProduct_rowguid] ON [SpecialOfferProduct]
( 
	[rowguid]             ASC
)
go

CREATE NONCLUSTERED INDEX [IX_SpecialOfferProduct_ProductID] ON [SpecialOfferProduct]
( 
	[ProductID]           ASC
)
go

ALTER TABLE [StateProvince]
	ADD CONSTRAINT [PK_StateProvince_StateProvinceID] PRIMARY KEY  CLUSTERED ([StateProvinceID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_StateProvince_Name] ON [StateProvince]
( 
	[Name]                ASC
)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_StateProvince_StateProvinceCode_CountryRegionCode] ON [StateProvince]
( 
	[StateProvinceCode]   ASC,
	[CountryRegionCode]   ASC
)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_StateProvince_rowguid] ON [StateProvince]
( 
	[rowguid]             ASC
)
go

ALTER TABLE [Store]
	ADD CONSTRAINT [PK_Store_BusinessEntityID] PRIMARY KEY  CLUSTERED ([BusinessEntityID] ASC)
go

CREATE UNIQUE NONCLUSTERED INDEX [AK_Store_rowguid] ON [Store]
( 
	[rowguid]             ASC
)
go

ALTER TABLE [test_table]
	ADD CONSTRAINT [XPKtest_table] PRIMARY KEY  CLUSTERED ([test_table_col1] ASC)
go

CREATE VIEW [Person].[vAdditionalContactInfo] AS  SELECT [BusinessEntityID], [FirstName], [MiddleName], [LastName],  [ContactInfo].ref.value( N'declare namespace ci="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactInfo"; 
        declare namespace act="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactTypes"; 
        (act:telephoneNumber)[1]/act:number' , 'nvarchar(50)' )  AS [TelephoneNumber],  ltrim( rtrim( [ContactInfo].ref.value( N'declare namespace ci="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactInfo"; 
        declare namespace act="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactTypes"; 
        (act:telephoneNumber/act:SpecialInstructions/text())[1]' , 'nvarchar(max)' ) ) )  AS [TelephoneSpecialInstructions],  [ContactInfo].ref.value( N'declare namespace ci="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactInfo"; 
        declare namespace act="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactTypes";
        (act:homePostalAddress/act:Street)[1]' , 'nvarchar(50)' )  AS [Street],  [ContactInfo].ref.value( N'declare namespace ci="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactInfo"; 
        declare namespace act="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactTypes"; 
        (act:homePostalAddress/act:City)[1]' , 'nvarchar(50)' )  AS [City],  [ContactInfo].ref.value( N'declare namespace ci="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactInfo"; 
        declare namespace act="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactTypes"; 
        (act:homePostalAddress/act:StateProvince)[1]' , 'nvarchar(50)' )  AS [StateProvince],  [ContactInfo].ref.value( N'declare namespace ci="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactInfo"; 
        declare namespace act="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactTypes"; 
        (act:homePostalAddress/act:PostalCode)[1]' , 'nvarchar(50)' )  AS [PostalCode],  [ContactInfo].ref.value( N'declare namespace ci="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactInfo"; 
        declare namespace act="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactTypes"; 
        (act:homePostalAddress/act:CountryRegion)[1]' , 'nvarchar(50)' )  AS [CountryRegion],  [ContactInfo].ref.value( N'declare namespace ci="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactInfo"; 
        declare namespace act="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactTypes"; 
        (act:homePostalAddress/act:SpecialInstructions/text())[1]' , 'nvarchar(max)' )  AS [HomeAddressSpecialInstructions],  [ContactInfo].ref.value( N'declare namespace ci="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactInfo"; 
        declare namespace act="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactTypes"; 
        (act:eMail/act:eMailAddress)[1]' , 'nvarchar(128)' )  AS [EMailAddress],  ltrim( rtrim( [ContactInfo].ref.value( N'declare namespace ci="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactInfo"; 
        declare namespace act="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactTypes"; 
        (act:eMail/act:SpecialInstructions/text())[1]' , 'nvarchar(max)' ) ) )  AS [EMailSpecialInstructions],  [ContactInfo].ref.value( N'declare namespace ci="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactInfo"; 
        declare namespace act="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactTypes"; 
        (act:eMail/act:SpecialInstructions/act:telephoneNumber/act:number)[1]' , 'nvarchar(50)' )  AS [EMailTelephoneNumber], [rowguid], [ModifiedDate] FROM Person.Person   OUTER APPLY   AdditionalContactInfo.nodes( 'declare namespace ci="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/ContactInfo"; 
    /ci:AdditionalContactInfo' ) AS ContactInfo 
(ref)
 WHERE [AdditionalContactInfo] IS NOT NULL
go

CREATE VIEW [Sales].[vIndividualCustomer] AS  SELECT p.[BusinessEntityID], p.[Title], p.[FirstName], p.[MiddleName], p.[LastName], p.[Suffix], pp.[PhoneNumber], pnt.[Name] AS [PhoneNumberType], ea.[EmailAddress], p.[EmailPromotion], at.[Name] AS [AddressType], a.[AddressLine1], a.[AddressLine2], a.[City], sp.Name AS StateProvinceName, a.[PostalCode], cr.Name AS CountryRegionName, p.[Demographics] FROM Person.Person AS p   INNER JOIN   Person.BusinessEntityAddress AS bea ON bea.[BusinessEntityID] = p.[BusinessEntityID]   INNER JOIN   Person.Address AS a ON a.[AddressID] = bea.[AddressID]   INNER JOIN   Person.StateProvince AS sp ON sp.[StateProvinceID] = a.[StateProvinceID]   INNER JOIN   Person.CountryRegion AS cr ON cr.[CountryRegionCode] = sp.[CountryRegionCode]   INNER JOIN   Person.AddressType AS at ON at.[AddressTypeID] = bea.[AddressTypeID]   INNER JOIN   Sales.Customer AS c ON c.[PersonID] = p.[BusinessEntityID]   LEFT OUTER JOIN   Person.EmailAddress AS ea ON ea.[BusinessEntityID] = p.[BusinessEntityID]   LEFT OUTER JOIN   Person.PersonPhone AS pp ON pp.[BusinessEntityID] = p.[BusinessEntityID]   LEFT OUTER JOIN   Person.PhoneNumberType AS pnt ON pnt.[PhoneNumberTypeID] = pp.[PhoneNumberTypeID] WHERE c.StoreID IS NULL
go

CREATE VIEW [Sales].[vPersonDemographics] AS  SELECT p.[BusinessEntityID],  [IndividualSurvey].[ref].[value]( N'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
        TotalPurchaseYTD[1]' , 'money' )  AS [TotalPurchaseYTD],  CONVERT(datetime,  REPLACE(  [IndividualSurvey].[ref].[value]( N'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
        DateFirstPurchase[1]' , 'nvarchar(20)' )  , 'Z' , '' ) , 101) AS [DateFirstPurchase],  CONVERT(datetime,  REPLACE(  [IndividualSurvey].[ref].[value]( N'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
        BirthDate[1]' , 'nvarchar(20)' )  , 'Z' , '' ) , 101) AS [BirthDate],  [IndividualSurvey].[ref].[value]( N'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
        MaritalStatus[1]' , 'nvarchar(1)' )  AS [MaritalStatus],  [IndividualSurvey].[ref].[value]( N'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
        YearlyIncome[1]' , 'nvarchar(30)' )  AS [YearlyIncome],  [IndividualSurvey].[ref].[value]( N'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
        Gender[1]' , 'nvarchar(1)' )  AS [Gender],  [IndividualSurvey].[ref].[value]( N'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
        TotalChildren[1]' , 'integer' )  AS [TotalChildren],  [IndividualSurvey].[ref].[value]( N'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
        NumberChildrenAtHome[1]' , 'integer' )  AS [NumberChildrenAtHome],  [IndividualSurvey].[ref].[value]( N'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
        Education[1]' , 'nvarchar(30)' )  AS [Education],  [IndividualSurvey].[ref].[value]( N'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
        Occupation[1]' , 'nvarchar(30)' )  AS [Occupation],  [IndividualSurvey].[ref].[value]( N'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
        HomeOwnerFlag[1]' , 'bit' )  AS [HomeOwnerFlag],  [IndividualSurvey].[ref].[value]( N'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
        NumberCarsOwned[1]' , 'integer' )  AS [NumberCarsOwned] FROM Person.Person AS p   CROSS APPLY   p.Demographics.nodes( N'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
    /IndividualSurvey' ) AS [IndividualSurvey] 
(ref)
 WHERE [Demographics] IS NOT NULL
go

CREATE VIEW [Sales].[vSalesPerson] AS  SELECT s.[BusinessEntityID], p.[Title], p.[FirstName], p.[MiddleName], p.[LastName], p.[Suffix], e.[JobTitle], pp.[PhoneNumber], pnt.[Name] AS [PhoneNumberType], ea.[EmailAddress], p.[EmailPromotion], a.[AddressLine1], a.[AddressLine2], a.[City], sp.Name AS StateProvinceName, a.[PostalCode], cr.Name AS CountryRegionName, st.Name AS TerritoryName, st.Group AS TerritoryGroup, s.[SalesQuota], s.[SalesYTD], s.[SalesLastYear] FROM Sales.SalesPerson AS s   INNER JOIN   HumanResources.Employee AS e ON e.[BusinessEntityID] = s.[BusinessEntityID]   INNER JOIN   Person.Person AS p ON p.[BusinessEntityID] = s.[BusinessEntityID]   INNER JOIN   Person.BusinessEntityAddress AS bea ON bea.[BusinessEntityID] = s.[BusinessEntityID]   INNER JOIN   Person.Address AS a ON a.[AddressID] = bea.[AddressID]   INNER JOIN   Person.StateProvince AS sp ON sp.[StateProvinceID] = a.[StateProvinceID]   INNER JOIN   Person.CountryRegion AS cr ON cr.[CountryRegionCode] = sp.[CountryRegionCode]   LEFT OUTER JOIN   Sales.SalesTerritory AS st ON st.[TerritoryID] = s.[TerritoryID]   LEFT OUTER JOIN   Person.EmailAddress AS ea ON ea.[BusinessEntityID] = p.[BusinessEntityID]   LEFT OUTER JOIN   Person.PersonPhone AS pp ON pp.[BusinessEntityID] = p.[BusinessEntityID]   LEFT OUTER JOIN   Person.PhoneNumberType AS pnt ON pnt.[PhoneNumberTypeID] = pp.[PhoneNumberTypeID]
go

CREATE VIEW [Person].[vStateProvinceCountryRegion] WITH SCHEMABINDING  AS  SELECT sp.[StateProvinceID], sp.[StateProvinceCode], sp.[IsOnlyStateProvinceFlag], sp.[Name] AS [StateProvinceName], sp.[TerritoryID], cr.[CountryRegionCode], cr.[Name] AS [CountryRegionName] FROM Person.StateProvince AS sp   INNER JOIN   Person.CountryRegion AS cr ON sp.[CountryRegionCode] = cr.[CountryRegionCode]
go

CREATE VIEW [vStoreWithDemographics]([BusinessEntityID],[Name],[AnnualSales],[AnnualRevenue],[BankName],[BusinessType],[YearOpened],[Specialty],[SquareFeet],[Brands],[Internet],[NumberEmployees])
AS
SELECT s.[BusinessEntityID],s.[Name], s.[Demographics].value( 'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/StoreSurvey"; 
        (/StoreSurvey/AnnualSales)[1]' , 'money' ) , s.[Demographics].value( 'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/StoreSurvey"; 
        (/StoreSurvey/AnnualRevenue)[1]' , 'money' ) , s.[Demographics].value( 'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/StoreSurvey"; 
        (/StoreSurvey/BankName)[1]' , 'nvarchar(50)' ) , s.[Demographics].value( 'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/StoreSurvey"; 
        (/StoreSurvey/BusinessType)[1]' , 'nvarchar(5)' ) , s.[Demographics].value( 'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/StoreSurvey"; 
        (/StoreSurvey/YearOpened)[1]' , 'integer' ) , s.[Demographics].value( 'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/StoreSurvey"; 
        (/StoreSurvey/Specialty)[1]' , 'nvarchar(50)' ) , s.[Demographics].value( 'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/StoreSurvey"; 
        (/StoreSurvey/SquareFeet)[1]' , 'integer' ) , s.[Demographics].value( 'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/StoreSurvey"; 
        (/StoreSurvey/Brands)[1]' , 'nvarchar(30)' ) , s.[Demographics].value( 'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/StoreSurvey"; 
        (/StoreSurvey/Internet)[1]' , 'nvarchar(30)' ) , s.[Demographics].value( 'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/StoreSurvey"; 
        (/StoreSurvey/NumberEmployees)[1]' , 'integer' ) 
	FROM [Store] s
go

CREATE VIEW [Sales].[vStoreWithContacts] AS  SELECT s.[BusinessEntityID], s.[Name], ct.[Name] AS [ContactType], p.[Title], p.[FirstName], p.[MiddleName], p.[LastName], p.[Suffix], pp.[PhoneNumber], pnt.[Name] AS [PhoneNumberType], ea.[EmailAddress], p.[EmailPromotion] FROM Sales.Store AS s   INNER JOIN   Person.BusinessEntityContact AS bec ON bec.[BusinessEntityID] = s.[BusinessEntityID]   INNER JOIN   Person.ContactType AS ct ON ct.[ContactTypeID] = bec.[ContactTypeID]   INNER JOIN   Person.Person AS p ON p.[BusinessEntityID] = bec.[PersonID]   LEFT OUTER JOIN   Person.EmailAddress AS ea ON ea.[BusinessEntityID] = p.[BusinessEntityID]   LEFT OUTER JOIN   Person.PersonPhone AS pp ON pp.[BusinessEntityID] = p.[BusinessEntityID]   LEFT OUTER JOIN   Person.PhoneNumberType AS pnt ON pnt.[PhoneNumberTypeID] = pp.[PhoneNumberTypeID]
go

CREATE VIEW [Sales].[vStoreWithAddresses] AS  SELECT s.[BusinessEntityID], s.[Name], at.[Name] AS [AddressType], a.[AddressLine1], a.[AddressLine2], a.[City], sp.[Name] AS [StateProvinceName], a.[PostalCode], cr.[Name] AS [CountryRegionName] FROM Sales.Store AS s   INNER JOIN   Person.BusinessEntityAddress AS bea ON bea.[BusinessEntityID] = s.[BusinessEntityID]   INNER JOIN   Person.Address AS a ON a.[AddressID] = bea.[AddressID]   INNER JOIN   Person.StateProvince AS sp ON sp.[StateProvinceID] = a.[StateProvinceID]   INNER JOIN   Person.CountryRegion AS cr ON cr.[CountryRegionCode] = sp.[CountryRegionCode]   INNER JOIN   Person.AddressType AS at ON at.[AddressTypeID] = bea.[AddressTypeID]
go

CREATE VIEW [Sales].[vSalesPersonSalesByFiscalYears] AS  SELECT pvt.[SalesPersonID], pvt.[FullName], pvt.[JobTitle], pvt.[SalesTerritory], pvt.[2002], pvt.[2003], pvt.[2004] FROM (  SELECT soh.[SalesPersonID], p.[FirstName] + ' ' +  Coalesce(p.[MiddleName] , '')  + ' ' + p.[LastName] AS [FullName], e.[JobTitle], st.[Name] AS [SalesTerritory], soh.[SubTotal],  Year( DateAdd(m, 6, soh.[OrderDate])) AS [FiscalYear] FROM Sales.SalesPerson AS sp   INNER JOIN   Sales.SalesOrderHeader AS soh ON sp.[BusinessEntityID] = soh.[SalesPersonID]   INNER JOIN   Sales.SalesTerritory AS st ON sp.[TerritoryID] = st.[TerritoryID]   INNER JOIN   HumanResources.Employee AS e ON soh.[SalesPersonID] = e.[BusinessEntityID]   INNER JOIN   Person.Person AS p ON p.[BusinessEntityID] = sp.[BusinessEntityID] ) AS soh  PIVOT ( SUM( [SubTotal]) FOR FiscalYear IN 
([2002], 
	[2003], 
	[2004])
 )   pvt
go


ALTER TABLE [Address] WITH CHECK 
	ADD CONSTRAINT [FK_Address_StateProvince_StateProvinceID] FOREIGN KEY ([StateProvinceID]) REFERENCES [StateProvince]([StateProvinceID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [Address]
	  WITH CHECK CHECK CONSTRAINT [FK_Address_StateProvince_StateProvinceID]
go


ALTER TABLE [BusinessEntityAddress] WITH CHECK 
	ADD CONSTRAINT [FK_BusinessEntityAddress_Address_AddressID] FOREIGN KEY ([AddressID]) REFERENCES [Address]([AddressID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [BusinessEntityAddress]
	  WITH CHECK CHECK CONSTRAINT [FK_BusinessEntityAddress_Address_AddressID]
go

ALTER TABLE [BusinessEntityAddress] WITH CHECK 
	ADD CONSTRAINT [FK_BusinessEntityAddress_AddressType_AddressTypeID] FOREIGN KEY ([AddressTypeID]) REFERENCES [AddressType]([AddressTypeID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [BusinessEntityAddress]
	  WITH CHECK CHECK CONSTRAINT [FK_BusinessEntityAddress_AddressType_AddressTypeID]
go

ALTER TABLE [BusinessEntityAddress] WITH CHECK 
	ADD CONSTRAINT [FK_BusinessEntityAddress_BusinessEntity_BusinessEntityID] FOREIGN KEY ([BusinessEntityID]) REFERENCES [BusinessEntity]([BusinessEntityID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [BusinessEntityAddress]
	  WITH CHECK CHECK CONSTRAINT [FK_BusinessEntityAddress_BusinessEntity_BusinessEntityID]
go


ALTER TABLE [BusinessEntityContact] WITH CHECK 
	ADD CONSTRAINT [FK_BusinessEntityContact_Person_PersonID] FOREIGN KEY ([PersonID]) REFERENCES [Person]([BusinessEntityID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [BusinessEntityContact]
	  WITH CHECK CHECK CONSTRAINT [FK_BusinessEntityContact_Person_PersonID]
go

ALTER TABLE [BusinessEntityContact] WITH CHECK 
	ADD CONSTRAINT [FK_BusinessEntityContact_ContactType_ContactTypeID] FOREIGN KEY ([ContactTypeID]) REFERENCES [ContactType]([ContactTypeID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [BusinessEntityContact]
	  WITH CHECK CHECK CONSTRAINT [FK_BusinessEntityContact_ContactType_ContactTypeID]
go

ALTER TABLE [BusinessEntityContact] WITH CHECK 
	ADD CONSTRAINT [FK_BusinessEntityContact_BusinessEntity_BusinessEntityID] FOREIGN KEY ([BusinessEntityID]) REFERENCES [BusinessEntity]([BusinessEntityID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [BusinessEntityContact]
	  WITH CHECK CHECK CONSTRAINT [FK_BusinessEntityContact_BusinessEntity_BusinessEntityID]
go


ALTER TABLE [CountryRegionCurrency] WITH CHECK 
	ADD CONSTRAINT [FK_CountryRegionCurrency_CountryRegion_CountryRegionCode] FOREIGN KEY ([CountryRegionCode]) REFERENCES [CountryRegion]([CountryRegionCode])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [CountryRegionCurrency]
	  WITH CHECK CHECK CONSTRAINT [FK_CountryRegionCurrency_CountryRegion_CountryRegionCode]
go

ALTER TABLE [CountryRegionCurrency] WITH CHECK 
	ADD CONSTRAINT [FK_CountryRegionCurrency_Currency_CurrencyCode] FOREIGN KEY ([CurrencyCode]) REFERENCES [Currency]([CurrencyCode])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [CountryRegionCurrency]
	  WITH CHECK CHECK CONSTRAINT [FK_CountryRegionCurrency_Currency_CurrencyCode]
go


ALTER TABLE [CurrencyRate] WITH CHECK 
	ADD CONSTRAINT [FK_CurrencyRate_Currency_FromCurrencyCode] FOREIGN KEY ([FromCurrencyCode]) REFERENCES [Currency]([CurrencyCode])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [CurrencyRate]
	  WITH CHECK CHECK CONSTRAINT [FK_CurrencyRate_Currency_FromCurrencyCode]
go

ALTER TABLE [CurrencyRate] WITH CHECK 
	ADD CONSTRAINT [FK_CurrencyRate_Currency_ToCurrencyCode] FOREIGN KEY ([ToCurrencyCode]) REFERENCES [Currency]([CurrencyCode])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [CurrencyRate]
	  WITH CHECK CHECK CONSTRAINT [FK_CurrencyRate_Currency_ToCurrencyCode]
go


ALTER TABLE [Customer] WITH CHECK 
	ADD CONSTRAINT [FK_Customer_Person_PersonID] FOREIGN KEY ([PersonID]) REFERENCES [Person]([BusinessEntityID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [Customer]
	  WITH CHECK CHECK CONSTRAINT [FK_Customer_Person_PersonID]
go

ALTER TABLE [Customer] WITH CHECK 
	ADD CONSTRAINT [FK_Customer_Store_StoreID] FOREIGN KEY ([StoreID]) REFERENCES [Store]([BusinessEntityID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [Customer]
	  WITH CHECK CHECK CONSTRAINT [FK_Customer_Store_StoreID]
go

ALTER TABLE [Customer] WITH CHECK 
	ADD CONSTRAINT [FK_Customer_SalesTerritory_TerritoryID] FOREIGN KEY ([TerritoryID]) REFERENCES [SalesTerritory]([TerritoryID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [Customer]
	  WITH CHECK CHECK CONSTRAINT [FK_Customer_SalesTerritory_TerritoryID]
go


ALTER TABLE [EmailAddress] WITH CHECK 
	ADD CONSTRAINT [FK_EmailAddress_Person_BusinessEntityID] FOREIGN KEY ([BusinessEntityID]) REFERENCES [Person]([BusinessEntityID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [EmailAddress]
	  WITH CHECK CHECK CONSTRAINT [FK_EmailAddress_Person_BusinessEntityID]
go


ALTER TABLE [emails]
	ADD CONSTRAINT [R_83] FOREIGN KEY ([test_table_col1]) REFERENCES [test_table]([test_table_col1])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go


ALTER TABLE [Password] WITH CHECK 
	ADD CONSTRAINT [FK_Password_Person_BusinessEntityID] FOREIGN KEY ([BusinessEntityID]) REFERENCES [Person]([BusinessEntityID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [Password]
	  WITH CHECK CHECK CONSTRAINT [FK_Password_Person_BusinessEntityID]
go


ALTER TABLE [Person] WITH CHECK 
	ADD CONSTRAINT [FK_Person_BusinessEntity_BusinessEntityID] FOREIGN KEY ([BusinessEntityID]) REFERENCES [BusinessEntity]([BusinessEntityID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [Person]
	  WITH CHECK CHECK CONSTRAINT [FK_Person_BusinessEntity_BusinessEntityID]
go


ALTER TABLE [PersonCreditCard] WITH CHECK 
	ADD CONSTRAINT [FK_PersonCreditCard_Person_BusinessEntityID] FOREIGN KEY ([BusinessEntityID]) REFERENCES [Person]([BusinessEntityID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [PersonCreditCard]
	  WITH CHECK CHECK CONSTRAINT [FK_PersonCreditCard_Person_BusinessEntityID]
go

ALTER TABLE [PersonCreditCard] WITH CHECK 
	ADD CONSTRAINT [FK_PersonCreditCard_CreditCard_CreditCardID] FOREIGN KEY ([CreditCardID]) REFERENCES [CreditCard]([CreditCardID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [PersonCreditCard]
	  WITH CHECK CHECK CONSTRAINT [FK_PersonCreditCard_CreditCard_CreditCardID]
go


ALTER TABLE [PersonPhone] WITH CHECK 
	ADD CONSTRAINT [FK_PersonPhone_Person_BusinessEntityID] FOREIGN KEY ([BusinessEntityID]) REFERENCES [Person]([BusinessEntityID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [PersonPhone]
	  WITH CHECK CHECK CONSTRAINT [FK_PersonPhone_Person_BusinessEntityID]
go

ALTER TABLE [PersonPhone] WITH CHECK 
	ADD CONSTRAINT [FK_PersonPhone_PhoneNumberType_PhoneNumberTypeID] FOREIGN KEY ([PhoneNumberTypeID]) REFERENCES [PhoneNumberType]([PhoneNumberTypeID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [PersonPhone]
	  WITH CHECK CHECK CONSTRAINT [FK_PersonPhone_PhoneNumberType_PhoneNumberTypeID]
go


ALTER TABLE [SalesOrderDetail] WITH CHECK 
	ADD CONSTRAINT [FK_SalesOrderDetail_SalesOrderHeader_SalesOrderID] FOREIGN KEY ([SalesOrderID]) REFERENCES [SalesOrderHeader]([SalesOrderID])
		ON DELETE CASCADE
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesOrderDetail]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesOrderDetail_SalesOrderHeader_SalesOrderID]
go

ALTER TABLE [SalesOrderDetail] WITH CHECK 
	ADD CONSTRAINT [FK_SalesOrderDetail_SpecialOfferProduct_SpecialOfferIDProductID] FOREIGN KEY ([SpecialOfferID],[ProductID]) REFERENCES [SpecialOfferProduct]([SpecialOfferID],[ProductID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesOrderDetail]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesOrderDetail_SpecialOfferProduct_SpecialOfferIDProductID]
go


ALTER TABLE [SalesOrderHeader] WITH CHECK 
	ADD CONSTRAINT  [CK_SalesOrderHeader_DueDate]
		CHECK  ( [DueDate]>=[OrderDate] ) 
go

ALTER TABLE [SalesOrderHeader] WITH CHECK 
	ADD CONSTRAINT  [CK_SalesOrderHeader_ShipDate]
		CHECK  ( [ShipDate]>=[OrderDate] OR [ShipDate] IS NULL ) 
go


ALTER TABLE [SalesOrderHeader] WITH CHECK 
	ADD CONSTRAINT [FK_SalesOrderHeader_Address_BillToAddressID] FOREIGN KEY ([BillToAddressID]) REFERENCES [Address]([AddressID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesOrderHeader]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesOrderHeader_Address_BillToAddressID]
go

ALTER TABLE [SalesOrderHeader] WITH CHECK 
	ADD CONSTRAINT [FK_SalesOrderHeader_Address_ShipToAddressID] FOREIGN KEY ([ShipToAddressID]) REFERENCES [Address]([AddressID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesOrderHeader]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesOrderHeader_Address_ShipToAddressID]
go

ALTER TABLE [SalesOrderHeader] WITH CHECK 
	ADD CONSTRAINT [FK_SalesOrderHeader_CreditCard_CreditCardID] FOREIGN KEY ([CreditCardID]) REFERENCES [CreditCard]([CreditCardID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesOrderHeader]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesOrderHeader_CreditCard_CreditCardID]
go

ALTER TABLE [SalesOrderHeader] WITH CHECK 
	ADD CONSTRAINT [FK_SalesOrderHeader_CurrencyRate_CurrencyRateID] FOREIGN KEY ([CurrencyRateID]) REFERENCES [CurrencyRate]([CurrencyRateID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesOrderHeader]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesOrderHeader_CurrencyRate_CurrencyRateID]
go

ALTER TABLE [SalesOrderHeader] WITH CHECK 
	ADD CONSTRAINT [FK_SalesOrderHeader_Customer_CustomerID] FOREIGN KEY ([CustomerID]) REFERENCES [Customer]([CustomerID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesOrderHeader]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesOrderHeader_Customer_CustomerID]
go

ALTER TABLE [SalesOrderHeader] WITH CHECK 
	ADD CONSTRAINT [FK_SalesOrderHeader_SalesPerson_SalesPersonID] FOREIGN KEY ([SalesPersonID]) REFERENCES [SalesPerson]([BusinessEntityID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesOrderHeader]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesOrderHeader_SalesPerson_SalesPersonID]
go

ALTER TABLE [SalesOrderHeader] WITH CHECK 
	ADD CONSTRAINT [FK_SalesOrderHeader_SalesTerritory_TerritoryID] FOREIGN KEY ([TerritoryID]) REFERENCES [SalesTerritory]([TerritoryID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesOrderHeader]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesOrderHeader_SalesTerritory_TerritoryID]
go


ALTER TABLE [SalesOrderHeaderSalesReason] WITH CHECK 
	ADD CONSTRAINT [FK_SalesOrderHeaderSalesReason_SalesReason_SalesReasonID] FOREIGN KEY ([SalesReasonID]) REFERENCES [SalesReason]([SalesReasonID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesOrderHeaderSalesReason]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesOrderHeaderSalesReason_SalesReason_SalesReasonID]
go

ALTER TABLE [SalesOrderHeaderSalesReason] WITH CHECK 
	ADD CONSTRAINT [FK_SalesOrderHeaderSalesReason_SalesOrderHeader_SalesOrderID] FOREIGN KEY ([SalesOrderID]) REFERENCES [SalesOrderHeader]([SalesOrderID])
		ON DELETE CASCADE
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesOrderHeaderSalesReason]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesOrderHeaderSalesReason_SalesOrderHeader_SalesOrderID]
go


ALTER TABLE [SalesPerson] WITH CHECK 
	ADD CONSTRAINT [FK_SalesPerson_SalesTerritory_TerritoryID] FOREIGN KEY ([TerritoryID]) REFERENCES [SalesTerritory]([TerritoryID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesPerson]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesPerson_SalesTerritory_TerritoryID]
go


ALTER TABLE [SalesPersonQuotaHistory] WITH CHECK 
	ADD CONSTRAINT [FK_SalesPersonQuotaHistory_SalesPerson_BusinessEntityID] FOREIGN KEY ([BusinessEntityID]) REFERENCES [SalesPerson]([BusinessEntityID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesPersonQuotaHistory]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesPersonQuotaHistory_SalesPerson_BusinessEntityID]
go


ALTER TABLE [SalesTaxRate] WITH CHECK 
	ADD CONSTRAINT [FK_SalesTaxRate_StateProvince_StateProvinceID] FOREIGN KEY ([StateProvinceID]) REFERENCES [StateProvince]([StateProvinceID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesTaxRate]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesTaxRate_StateProvince_StateProvinceID]
go


ALTER TABLE [SalesTerritory] WITH CHECK 
	ADD CONSTRAINT [FK_SalesTerritory_CountryRegion_CountryRegionCode] FOREIGN KEY ([CountryRegionCode]) REFERENCES [CountryRegion]([CountryRegionCode])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesTerritory]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesTerritory_CountryRegion_CountryRegionCode]
go


ALTER TABLE [SalesTerritoryHistory] WITH CHECK 
	ADD CONSTRAINT  [CK_SalesTerritoryHistory_EndDate]
		CHECK  ( [EndDate]>=[StartDate] OR [EndDate] IS NULL ) 
go


ALTER TABLE [SalesTerritoryHistory] WITH CHECK 
	ADD CONSTRAINT [FK_SalesTerritoryHistory_SalesPerson_BusinessEntityID] FOREIGN KEY ([BusinessEntityID]) REFERENCES [SalesPerson]([BusinessEntityID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesTerritoryHistory]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesTerritoryHistory_SalesPerson_BusinessEntityID]
go

ALTER TABLE [SalesTerritoryHistory] WITH CHECK 
	ADD CONSTRAINT [FK_SalesTerritoryHistory_SalesTerritory_TerritoryID] FOREIGN KEY ([TerritoryID]) REFERENCES [SalesTerritory]([TerritoryID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [SalesTerritoryHistory]
	  WITH CHECK CHECK CONSTRAINT [FK_SalesTerritoryHistory_SalesTerritory_TerritoryID]
go


ALTER TABLE [SpecialOffer] WITH CHECK 
	ADD CONSTRAINT  [CK_SpecialOffer_EndDate]
		CHECK  ( [EndDate]>=[StartDate] ) 
go


ALTER TABLE [SpecialOfferProduct] WITH CHECK 
	ADD CONSTRAINT [FK_SpecialOfferProduct_SpecialOffer_SpecialOfferID] FOREIGN KEY ([SpecialOfferID]) REFERENCES [SpecialOffer]([SpecialOfferID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [SpecialOfferProduct]
	  WITH CHECK CHECK CONSTRAINT [FK_SpecialOfferProduct_SpecialOffer_SpecialOfferID]
go


ALTER TABLE [StateProvince] WITH CHECK 
	ADD CONSTRAINT [FK_StateProvince_CountryRegion_CountryRegionCode] FOREIGN KEY ([CountryRegionCode]) REFERENCES [CountryRegion]([CountryRegionCode])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [StateProvince]
	  WITH CHECK CHECK CONSTRAINT [FK_StateProvince_CountryRegion_CountryRegionCode]
go

ALTER TABLE [StateProvince] WITH CHECK 
	ADD CONSTRAINT [FK_StateProvince_SalesTerritory_TerritoryID] FOREIGN KEY ([TerritoryID]) REFERENCES [SalesTerritory]([TerritoryID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [StateProvince]
	  WITH CHECK CHECK CONSTRAINT [FK_StateProvince_SalesTerritory_TerritoryID]
go


ALTER TABLE [Store] WITH CHECK 
	ADD CONSTRAINT [FK_Store_BusinessEntity_BusinessEntityID] FOREIGN KEY ([BusinessEntityID]) REFERENCES [BusinessEntity]([BusinessEntityID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [Store]
	  WITH CHECK CHECK CONSTRAINT [FK_Store_BusinessEntity_BusinessEntityID]
go

ALTER TABLE [Store] WITH CHECK 
	ADD CONSTRAINT [FK_Store_SalesPerson_SalesPersonID] FOREIGN KEY ([SalesPersonID]) REFERENCES [SalesPerson]([BusinessEntityID])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
go

ALTER TABLE [Store]
	  WITH CHECK CHECK CONSTRAINT [FK_Store_SalesPerson_SalesPersonID]
go

CREATE TRIGGER Person.tD_Address ON Person.Address FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on Address */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Person.Address  Sales.SalesOrderHeader on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="0005541d", PARENT_OWNER="Person", PARENT_TABLE="Address"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_Address_ShipToAddressID", FK_COLUMNS="ShipToAddressID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeader
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeader,deleted," = "," AND") */
        Sales.SalesOrderHeader.ShipToAddressID = deleted.AddressID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.Address because Sales.SalesOrderHeader exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.Address  Sales.SalesOrderHeader on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Address"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_Address_BillToAddressID", FK_COLUMNS="BillToAddressID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeader
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeader,deleted," = "," AND") */
        Sales.SalesOrderHeader.BillToAddressID = deleted.AddressID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.Address because Sales.SalesOrderHeader exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.Address  Person.BusinessEntityAddress on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Address"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityAddress"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityAddress_Address_AddressID", FK_COLUMNS="AddressID" */
    IF EXISTS (
      SELECT * FROM deleted,Person.BusinessEntityAddress
      WHERE
        /*  %JoinFKPK(Person.BusinessEntityAddress,deleted," = "," AND") */
        Person.BusinessEntityAddress.AddressID = deleted.AddressID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.Address because Person.BusinessEntityAddress exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.StateProvince  Person.Address on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="StateProvince"
    CHILD_OWNER="Person", CHILD_TABLE="Address"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Address_StateProvince_StateProvinceID", FK_COLUMNS="StateProvinceID" */
    IF EXISTS (SELECT * FROM deleted,Person.StateProvince
      WHERE
        /* %JoinFKPK(deleted,Person.StateProvince," = "," AND") */
        deleted.StateProvinceID = Person.StateProvince.StateProvinceID AND
        NOT EXISTS (
          SELECT * FROM Person.Address
          WHERE
            /* %JoinFKPK(Person.Address,Person.StateProvince," = "," AND") */
            Person.Address.StateProvinceID = Person.StateProvince.StateProvinceID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Person.Address because Person.StateProvince exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tU_Address ON Person.Address FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on Address */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insAddressID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.Address  Sales.SalesOrderHeader on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="0005b808", PARENT_OWNER="Person", PARENT_TABLE="Address"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_Address_ShipToAddressID", FK_COLUMNS="ShipToAddressID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(AddressID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeader
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeader,deleted," = "," AND") */
        Sales.SalesOrderHeader.ShipToAddressID = deleted.AddressID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.Address because Sales.SalesOrderHeader exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.Address  Sales.SalesOrderHeader on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Address"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_Address_BillToAddressID", FK_COLUMNS="BillToAddressID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(AddressID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeader
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeader,deleted," = "," AND") */
        Sales.SalesOrderHeader.BillToAddressID = deleted.AddressID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.Address because Sales.SalesOrderHeader exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.Address  Person.BusinessEntityAddress on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Address"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityAddress"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityAddress_Address_AddressID", FK_COLUMNS="AddressID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(AddressID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Person.BusinessEntityAddress
      WHERE
        /*  %JoinFKPK(Person.BusinessEntityAddress,deleted," = "," AND") */
        Person.BusinessEntityAddress.AddressID = deleted.AddressID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.Address because Person.BusinessEntityAddress exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.StateProvince  Person.Address on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="StateProvince"
    CHILD_OWNER="Person", CHILD_TABLE="Address"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Address_StateProvince_StateProvinceID", FK_COLUMNS="StateProvinceID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(StateProvinceID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.StateProvince
        WHERE
          /* %JoinFKPK(inserted,Person.StateProvince) */
          inserted.StateProvinceID = Person.StateProvince.StateProvinceID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Person.Address because Person.StateProvince does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tD_AddressType ON Person.AddressType FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on AddressType */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Person.AddressType  Person.BusinessEntityAddress on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00016e22", PARENT_OWNER="Person", PARENT_TABLE="AddressType"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityAddress"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityAddress_AddressType_AddressTypeID", FK_COLUMNS="AddressTypeID" */
    IF EXISTS (
      SELECT * FROM deleted,Person.BusinessEntityAddress
      WHERE
        /*  %JoinFKPK(Person.BusinessEntityAddress,deleted," = "," AND") */
        Person.BusinessEntityAddress.AddressTypeID = deleted.AddressTypeID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.AddressType because Person.BusinessEntityAddress exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tU_AddressType ON Person.AddressType FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on AddressType */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insAddressTypeID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.AddressType  Person.BusinessEntityAddress on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00018e86", PARENT_OWNER="Person", PARENT_TABLE="AddressType"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityAddress"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityAddress_AddressType_AddressTypeID", FK_COLUMNS="AddressTypeID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(AddressTypeID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Person.BusinessEntityAddress
      WHERE
        /*  %JoinFKPK(Person.BusinessEntityAddress,deleted," = "," AND") */
        Person.BusinessEntityAddress.AddressTypeID = deleted.AddressTypeID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.AddressType because Person.BusinessEntityAddress exists.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tD_BusinessEntity ON Person.BusinessEntity FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on BusinessEntity */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Person.BusinessEntity  Sales.Store on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00051b21", PARENT_OWNER="Person", PARENT_TABLE="BusinessEntity"
    CHILD_OWNER="Sales", CHILD_TABLE="Store"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Store_BusinessEntity_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.Store
      WHERE
        /*  %JoinFKPK(Sales.Store,deleted," = "," AND") */
        Sales.Store.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.BusinessEntity because Sales.Store exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.BusinessEntity  Person.Person on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="BusinessEntity"
    CHILD_OWNER="Person", CHILD_TABLE="Person"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Person_BusinessEntity_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (
      SELECT * FROM deleted,Person.Person
      WHERE
        /*  %JoinFKPK(Person.Person,deleted," = "," AND") */
        Person.Person.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.BusinessEntity because Person.Person exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.BusinessEntity  Person.BusinessEntityContact on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="BusinessEntity"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityContact"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityContact_BusinessEntity_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (
      SELECT * FROM deleted,Person.BusinessEntityContact
      WHERE
        /*  %JoinFKPK(Person.BusinessEntityContact,deleted," = "," AND") */
        Person.BusinessEntityContact.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.BusinessEntity because Person.BusinessEntityContact exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.BusinessEntity  Person.BusinessEntityAddress on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="BusinessEntity"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityAddress"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityAddress_BusinessEntity_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (
      SELECT * FROM deleted,Person.BusinessEntityAddress
      WHERE
        /*  %JoinFKPK(Person.BusinessEntityAddress,deleted," = "," AND") */
        Person.BusinessEntityAddress.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.BusinessEntity because Person.BusinessEntityAddress exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tU_BusinessEntity ON Person.BusinessEntity FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on BusinessEntity */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insBusinessEntityID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.BusinessEntity  Sales.Store on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="000588ac", PARENT_OWNER="Person", PARENT_TABLE="BusinessEntity"
    CHILD_OWNER="Sales", CHILD_TABLE="Store"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Store_BusinessEntity_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.Store
      WHERE
        /*  %JoinFKPK(Sales.Store,deleted," = "," AND") */
        Sales.Store.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.BusinessEntity because Sales.Store exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.BusinessEntity  Person.Person on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="BusinessEntity"
    CHILD_OWNER="Person", CHILD_TABLE="Person"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Person_BusinessEntity_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Person.Person
      WHERE
        /*  %JoinFKPK(Person.Person,deleted," = "," AND") */
        Person.Person.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.BusinessEntity because Person.Person exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.BusinessEntity  Person.BusinessEntityContact on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="BusinessEntity"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityContact"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityContact_BusinessEntity_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Person.BusinessEntityContact
      WHERE
        /*  %JoinFKPK(Person.BusinessEntityContact,deleted," = "," AND") */
        Person.BusinessEntityContact.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.BusinessEntity because Person.BusinessEntityContact exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.BusinessEntity  Person.BusinessEntityAddress on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="BusinessEntity"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityAddress"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityAddress_BusinessEntity_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Person.BusinessEntityAddress
      WHERE
        /*  %JoinFKPK(Person.BusinessEntityAddress,deleted," = "," AND") */
        Person.BusinessEntityAddress.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.BusinessEntity because Person.BusinessEntityAddress exists.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tD_BusinessEntityAddress ON Person.BusinessEntityAddress FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on BusinessEntityAddress */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Person.BusinessEntity  Person.BusinessEntityAddress on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00050ba9", PARENT_OWNER="Person", PARENT_TABLE="BusinessEntity"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityAddress"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityAddress_BusinessEntity_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (SELECT * FROM deleted,Person.BusinessEntity
      WHERE
        /* %JoinFKPK(deleted,Person.BusinessEntity," = "," AND") */
        deleted.BusinessEntityID = Person.BusinessEntity.BusinessEntityID AND
        NOT EXISTS (
          SELECT * FROM Person.BusinessEntityAddress
          WHERE
            /* %JoinFKPK(Person.BusinessEntityAddress,Person.BusinessEntity," = "," AND") */
            Person.BusinessEntityAddress.BusinessEntityID = Person.BusinessEntity.BusinessEntityID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Person.BusinessEntityAddress because Person.BusinessEntity exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.AddressType  Person.BusinessEntityAddress on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="AddressType"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityAddress"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityAddress_AddressType_AddressTypeID", FK_COLUMNS="AddressTypeID" */
    IF EXISTS (SELECT * FROM deleted,Person.AddressType
      WHERE
        /* %JoinFKPK(deleted,Person.AddressType," = "," AND") */
        deleted.AddressTypeID = Person.AddressType.AddressTypeID AND
        NOT EXISTS (
          SELECT * FROM Person.BusinessEntityAddress
          WHERE
            /* %JoinFKPK(Person.BusinessEntityAddress,Person.AddressType," = "," AND") */
            Person.BusinessEntityAddress.AddressTypeID = Person.AddressType.AddressTypeID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Person.BusinessEntityAddress because Person.AddressType exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.Address  Person.BusinessEntityAddress on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Address"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityAddress"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityAddress_Address_AddressID", FK_COLUMNS="AddressID" */
    IF EXISTS (SELECT * FROM deleted,Person.Address
      WHERE
        /* %JoinFKPK(deleted,Person.Address," = "," AND") */
        deleted.AddressID = Person.Address.AddressID AND
        NOT EXISTS (
          SELECT * FROM Person.BusinessEntityAddress
          WHERE
            /* %JoinFKPK(Person.BusinessEntityAddress,Person.Address," = "," AND") */
            Person.BusinessEntityAddress.AddressID = Person.Address.AddressID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Person.BusinessEntityAddress because Person.Address exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tU_BusinessEntityAddress ON Person.BusinessEntityAddress FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on BusinessEntityAddress */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insBusinessEntityID int, 
           @insAddressID int, 
           @insAddressTypeID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.BusinessEntity  Person.BusinessEntityAddress on child update no action */
  /* ERWIN_RELATION:CHECKSUM="0004e842", PARENT_OWNER="Person", PARENT_TABLE="BusinessEntity"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityAddress"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityAddress_BusinessEntity_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.BusinessEntity
        WHERE
          /* %JoinFKPK(inserted,Person.BusinessEntity) */
          inserted.BusinessEntityID = Person.BusinessEntity.BusinessEntityID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Person.BusinessEntityAddress because Person.BusinessEntity does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.AddressType  Person.BusinessEntityAddress on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="AddressType"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityAddress"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityAddress_AddressType_AddressTypeID", FK_COLUMNS="AddressTypeID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(AddressTypeID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.AddressType
        WHERE
          /* %JoinFKPK(inserted,Person.AddressType) */
          inserted.AddressTypeID = Person.AddressType.AddressTypeID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Person.BusinessEntityAddress because Person.AddressType does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.Address  Person.BusinessEntityAddress on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Address"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityAddress"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityAddress_Address_AddressID", FK_COLUMNS="AddressID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(AddressID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.Address
        WHERE
          /* %JoinFKPK(inserted,Person.Address) */
          inserted.AddressID = Person.Address.AddressID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Person.BusinessEntityAddress because Person.Address does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tD_BusinessEntityContact ON Person.BusinessEntityContact FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on BusinessEntityContact */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Person.BusinessEntity  Person.BusinessEntityContact on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00051ab4", PARENT_OWNER="Person", PARENT_TABLE="BusinessEntity"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityContact"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityContact_BusinessEntity_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (SELECT * FROM deleted,Person.BusinessEntity
      WHERE
        /* %JoinFKPK(deleted,Person.BusinessEntity," = "," AND") */
        deleted.BusinessEntityID = Person.BusinessEntity.BusinessEntityID AND
        NOT EXISTS (
          SELECT * FROM Person.BusinessEntityContact
          WHERE
            /* %JoinFKPK(Person.BusinessEntityContact,Person.BusinessEntity," = "," AND") */
            Person.BusinessEntityContact.BusinessEntityID = Person.BusinessEntity.BusinessEntityID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Person.BusinessEntityContact because Person.BusinessEntity exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.ContactType  Person.BusinessEntityContact on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="ContactType"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityContact"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityContact_ContactType_ContactTypeID", FK_COLUMNS="ContactTypeID" */
    IF EXISTS (SELECT * FROM deleted,Person.ContactType
      WHERE
        /* %JoinFKPK(deleted,Person.ContactType," = "," AND") */
        deleted.ContactTypeID = Person.ContactType.ContactTypeID AND
        NOT EXISTS (
          SELECT * FROM Person.BusinessEntityContact
          WHERE
            /* %JoinFKPK(Person.BusinessEntityContact,Person.ContactType," = "," AND") */
            Person.BusinessEntityContact.ContactTypeID = Person.ContactType.ContactTypeID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Person.BusinessEntityContact because Person.ContactType exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.Person  Person.BusinessEntityContact on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityContact"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityContact_Person_PersonID", FK_COLUMNS="PersonID" */
    IF EXISTS (SELECT * FROM deleted,Person.Person
      WHERE
        /* %JoinFKPK(deleted,Person.Person," = "," AND") */
        deleted.PersonID = Person.Person.BusinessEntityID AND
        NOT EXISTS (
          SELECT * FROM Person.BusinessEntityContact
          WHERE
            /* %JoinFKPK(Person.BusinessEntityContact,Person.Person," = "," AND") */
            Person.BusinessEntityContact.PersonID = Person.Person.BusinessEntityID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Person.BusinessEntityContact because Person.Person exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tU_BusinessEntityContact ON Person.BusinessEntityContact FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on BusinessEntityContact */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insBusinessEntityID int, 
           @insPersonID int, 
           @insContactTypeID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.BusinessEntity  Person.BusinessEntityContact on child update no action */
  /* ERWIN_RELATION:CHECKSUM="0004f3e7", PARENT_OWNER="Person", PARENT_TABLE="BusinessEntity"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityContact"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityContact_BusinessEntity_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.BusinessEntity
        WHERE
          /* %JoinFKPK(inserted,Person.BusinessEntity) */
          inserted.BusinessEntityID = Person.BusinessEntity.BusinessEntityID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Person.BusinessEntityContact because Person.BusinessEntity does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.ContactType  Person.BusinessEntityContact on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="ContactType"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityContact"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityContact_ContactType_ContactTypeID", FK_COLUMNS="ContactTypeID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(ContactTypeID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.ContactType
        WHERE
          /* %JoinFKPK(inserted,Person.ContactType) */
          inserted.ContactTypeID = Person.ContactType.ContactTypeID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Person.BusinessEntityContact because Person.ContactType does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.Person  Person.BusinessEntityContact on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityContact"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityContact_Person_PersonID", FK_COLUMNS="PersonID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(PersonID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.Person
        WHERE
          /* %JoinFKPK(inserted,Person.Person) */
          inserted.PersonID = Person.Person.BusinessEntityID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Person.BusinessEntityContact because Person.Person does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tD_ContactType ON Person.ContactType FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on ContactType */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Person.ContactType  Person.BusinessEntityContact on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00016aa4", PARENT_OWNER="Person", PARENT_TABLE="ContactType"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityContact"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityContact_ContactType_ContactTypeID", FK_COLUMNS="ContactTypeID" */
    IF EXISTS (
      SELECT * FROM deleted,Person.BusinessEntityContact
      WHERE
        /*  %JoinFKPK(Person.BusinessEntityContact,deleted," = "," AND") */
        Person.BusinessEntityContact.ContactTypeID = deleted.ContactTypeID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.ContactType because Person.BusinessEntityContact exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tU_ContactType ON Person.ContactType FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on ContactType */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insContactTypeID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.ContactType  Person.BusinessEntityContact on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00018579", PARENT_OWNER="Person", PARENT_TABLE="ContactType"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityContact"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityContact_ContactType_ContactTypeID", FK_COLUMNS="ContactTypeID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(ContactTypeID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Person.BusinessEntityContact
      WHERE
        /*  %JoinFKPK(Person.BusinessEntityContact,deleted," = "," AND") */
        Person.BusinessEntityContact.ContactTypeID = deleted.ContactTypeID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.ContactType because Person.BusinessEntityContact exists.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tD_CountryRegion ON Person.CountryRegion FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on CountryRegion */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Person.CountryRegion  Person.StateProvince on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="0003de19", PARENT_OWNER="Person", PARENT_TABLE="CountryRegion"
    CHILD_OWNER="Person", CHILD_TABLE="StateProvince"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_StateProvince_CountryRegion_CountryRegionCode", FK_COLUMNS="CountryRegionCode" */
    IF EXISTS (
      SELECT * FROM deleted,Person.StateProvince
      WHERE
        /*  %JoinFKPK(Person.StateProvince,deleted," = "," AND") */
        Person.StateProvince.CountryRegionCode = deleted.CountryRegionCode
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.CountryRegion because Person.StateProvince exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.CountryRegion  Sales.SalesTerritory on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="CountryRegion"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesTerritory"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesTerritory_CountryRegion_CountryRegionCode", FK_COLUMNS="CountryRegionCode" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesTerritory
      WHERE
        /*  %JoinFKPK(Sales.SalesTerritory,deleted," = "," AND") */
        Sales.SalesTerritory.CountryRegionCode = deleted.CountryRegionCode
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.CountryRegion because Sales.SalesTerritory exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.CountryRegion  Sales.CountryRegionCurrency on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="CountryRegion"
    CHILD_OWNER="Sales", CHILD_TABLE="CountryRegionCurrency"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_CountryRegionCurrency_CountryRegion_CountryRegionCode", FK_COLUMNS="CountryRegionCode" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.CountryRegionCurrency
      WHERE
        /*  %JoinFKPK(Sales.CountryRegionCurrency,deleted," = "," AND") */
        Sales.CountryRegionCurrency.CountryRegionCode = deleted.CountryRegionCode
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.CountryRegion because Sales.CountryRegionCurrency exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tU_CountryRegion ON Person.CountryRegion FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on CountryRegion */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insCountryRegionCode nvarchar(3),
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.CountryRegion  Person.StateProvince on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00044d51", PARENT_OWNER="Person", PARENT_TABLE="CountryRegion"
    CHILD_OWNER="Person", CHILD_TABLE="StateProvince"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_StateProvince_CountryRegion_CountryRegionCode", FK_COLUMNS="CountryRegionCode" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(CountryRegionCode)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Person.StateProvince
      WHERE
        /*  %JoinFKPK(Person.StateProvince,deleted," = "," AND") */
        Person.StateProvince.CountryRegionCode = deleted.CountryRegionCode
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.CountryRegion because Person.StateProvince exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.CountryRegion  Sales.SalesTerritory on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="CountryRegion"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesTerritory"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesTerritory_CountryRegion_CountryRegionCode", FK_COLUMNS="CountryRegionCode" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(CountryRegionCode)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesTerritory
      WHERE
        /*  %JoinFKPK(Sales.SalesTerritory,deleted," = "," AND") */
        Sales.SalesTerritory.CountryRegionCode = deleted.CountryRegionCode
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.CountryRegion because Sales.SalesTerritory exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.CountryRegion  Sales.CountryRegionCurrency on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="CountryRegion"
    CHILD_OWNER="Sales", CHILD_TABLE="CountryRegionCurrency"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_CountryRegionCurrency_CountryRegion_CountryRegionCode", FK_COLUMNS="CountryRegionCode" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(CountryRegionCode)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.CountryRegionCurrency
      WHERE
        /*  %JoinFKPK(Sales.CountryRegionCurrency,deleted," = "," AND") */
        Sales.CountryRegionCurrency.CountryRegionCode = deleted.CountryRegionCode
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.CountryRegion because Sales.CountryRegionCurrency exists.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tD_CountryRegionCurrency ON Sales.CountryRegionCurrency FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on CountryRegionCurrency */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.Currency  Sales.CountryRegionCurrency on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="0003510d", PARENT_OWNER="Sales", PARENT_TABLE="Currency"
    CHILD_OWNER="Sales", CHILD_TABLE="CountryRegionCurrency"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_CountryRegionCurrency_Currency_CurrencyCode", FK_COLUMNS="CurrencyCode" */
    IF EXISTS (SELECT * FROM deleted,Sales.Currency
      WHERE
        /* %JoinFKPK(deleted,Sales.Currency," = "," AND") */
        deleted.CurrencyCode = Sales.Currency.CurrencyCode AND
        NOT EXISTS (
          SELECT * FROM Sales.CountryRegionCurrency
          WHERE
            /* %JoinFKPK(Sales.CountryRegionCurrency,Sales.Currency," = "," AND") */
            Sales.CountryRegionCurrency.CurrencyCode = Sales.Currency.CurrencyCode
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.CountryRegionCurrency because Sales.Currency exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.CountryRegion  Sales.CountryRegionCurrency on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="CountryRegion"
    CHILD_OWNER="Sales", CHILD_TABLE="CountryRegionCurrency"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_CountryRegionCurrency_CountryRegion_CountryRegionCode", FK_COLUMNS="CountryRegionCode" */
    IF EXISTS (SELECT * FROM deleted,Person.CountryRegion
      WHERE
        /* %JoinFKPK(deleted,Person.CountryRegion," = "," AND") */
        deleted.CountryRegionCode = Person.CountryRegion.CountryRegionCode AND
        NOT EXISTS (
          SELECT * FROM Sales.CountryRegionCurrency
          WHERE
            /* %JoinFKPK(Sales.CountryRegionCurrency,Person.CountryRegion," = "," AND") */
            Sales.CountryRegionCurrency.CountryRegionCode = Person.CountryRegion.CountryRegionCode
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.CountryRegionCurrency because Person.CountryRegion exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_CountryRegionCurrency ON Sales.CountryRegionCurrency FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on CountryRegionCurrency */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insCountryRegionCode nvarchar(3), 
           @insCurrencyCode nchar(3),
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.Currency  Sales.CountryRegionCurrency on child update no action */
  /* ERWIN_RELATION:CHECKSUM="0003434c", PARENT_OWNER="Sales", PARENT_TABLE="Currency"
    CHILD_OWNER="Sales", CHILD_TABLE="CountryRegionCurrency"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_CountryRegionCurrency_Currency_CurrencyCode", FK_COLUMNS="CurrencyCode" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(CurrencyCode)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.Currency
        WHERE
          /* %JoinFKPK(inserted,Sales.Currency) */
          inserted.CurrencyCode = Sales.Currency.CurrencyCode
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.CountryRegionCurrency because Sales.Currency does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.CountryRegion  Sales.CountryRegionCurrency on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="CountryRegion"
    CHILD_OWNER="Sales", CHILD_TABLE="CountryRegionCurrency"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_CountryRegionCurrency_CountryRegion_CountryRegionCode", FK_COLUMNS="CountryRegionCode" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(CountryRegionCode)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.CountryRegion
        WHERE
          /* %JoinFKPK(inserted,Person.CountryRegion) */
          inserted.CountryRegionCode = Person.CountryRegion.CountryRegionCode
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.CountryRegionCurrency because Person.CountryRegion does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tD_CreditCard ON Sales.CreditCard FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on CreditCard */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.CreditCard  Sales.SalesOrderHeader on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00027f79", PARENT_OWNER="Sales", PARENT_TABLE="CreditCard"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_CreditCard_CreditCardID", FK_COLUMNS="CreditCardID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeader
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeader,deleted," = "," AND") */
        Sales.SalesOrderHeader.CreditCardID = deleted.CreditCardID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.CreditCard because Sales.SalesOrderHeader exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.CreditCard  Sales.PersonCreditCard on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="CreditCard"
    CHILD_OWNER="Sales", CHILD_TABLE="PersonCreditCard"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_PersonCreditCard_CreditCard_CreditCardID", FK_COLUMNS="CreditCardID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.PersonCreditCard
      WHERE
        /*  %JoinFKPK(Sales.PersonCreditCard,deleted," = "," AND") */
        Sales.PersonCreditCard.CreditCardID = deleted.CreditCardID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.CreditCard because Sales.PersonCreditCard exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_CreditCard ON Sales.CreditCard FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on CreditCard */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insCreditCardID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.CreditCard  Sales.SalesOrderHeader on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="0002c073", PARENT_OWNER="Sales", PARENT_TABLE="CreditCard"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_CreditCard_CreditCardID", FK_COLUMNS="CreditCardID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(CreditCardID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeader
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeader,deleted," = "," AND") */
        Sales.SalesOrderHeader.CreditCardID = deleted.CreditCardID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.CreditCard because Sales.SalesOrderHeader exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.CreditCard  Sales.PersonCreditCard on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="CreditCard"
    CHILD_OWNER="Sales", CHILD_TABLE="PersonCreditCard"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_PersonCreditCard_CreditCard_CreditCardID", FK_COLUMNS="CreditCardID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(CreditCardID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.PersonCreditCard
      WHERE
        /*  %JoinFKPK(Sales.PersonCreditCard,deleted," = "," AND") */
        Sales.PersonCreditCard.CreditCardID = deleted.CreditCardID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.CreditCard because Sales.PersonCreditCard exists.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tD_Currency ON Sales.Currency FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on Currency */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.Currency  Sales.CurrencyRate on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="0003af72", PARENT_OWNER="Sales", PARENT_TABLE="Currency"
    CHILD_OWNER="Sales", CHILD_TABLE="CurrencyRate"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_CurrencyRate_Currency_ToCurrencyCode", FK_COLUMNS="ToCurrencyCode" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.CurrencyRate
      WHERE
        /*  %JoinFKPK(Sales.CurrencyRate,deleted," = "," AND") */
        Sales.CurrencyRate.ToCurrencyCode = deleted.CurrencyCode
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.Currency because Sales.CurrencyRate exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.Currency  Sales.CurrencyRate on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="Currency"
    CHILD_OWNER="Sales", CHILD_TABLE="CurrencyRate"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_CurrencyRate_Currency_FromCurrencyCode", FK_COLUMNS="FromCurrencyCode" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.CurrencyRate
      WHERE
        /*  %JoinFKPK(Sales.CurrencyRate,deleted," = "," AND") */
        Sales.CurrencyRate.FromCurrencyCode = deleted.CurrencyCode
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.Currency because Sales.CurrencyRate exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.Currency  Sales.CountryRegionCurrency on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="Currency"
    CHILD_OWNER="Sales", CHILD_TABLE="CountryRegionCurrency"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_CountryRegionCurrency_Currency_CurrencyCode", FK_COLUMNS="CurrencyCode" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.CountryRegionCurrency
      WHERE
        /*  %JoinFKPK(Sales.CountryRegionCurrency,deleted," = "," AND") */
        Sales.CountryRegionCurrency.CurrencyCode = deleted.CurrencyCode
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.Currency because Sales.CountryRegionCurrency exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_Currency ON Sales.Currency FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on Currency */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insCurrencyCode nchar(3),
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.Currency  Sales.CurrencyRate on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00040737", PARENT_OWNER="Sales", PARENT_TABLE="Currency"
    CHILD_OWNER="Sales", CHILD_TABLE="CurrencyRate"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_CurrencyRate_Currency_ToCurrencyCode", FK_COLUMNS="ToCurrencyCode" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(CurrencyCode)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.CurrencyRate
      WHERE
        /*  %JoinFKPK(Sales.CurrencyRate,deleted," = "," AND") */
        Sales.CurrencyRate.ToCurrencyCode = deleted.CurrencyCode
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.Currency because Sales.CurrencyRate exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.Currency  Sales.CurrencyRate on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="Currency"
    CHILD_OWNER="Sales", CHILD_TABLE="CurrencyRate"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_CurrencyRate_Currency_FromCurrencyCode", FK_COLUMNS="FromCurrencyCode" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(CurrencyCode)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.CurrencyRate
      WHERE
        /*  %JoinFKPK(Sales.CurrencyRate,deleted," = "," AND") */
        Sales.CurrencyRate.FromCurrencyCode = deleted.CurrencyCode
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.Currency because Sales.CurrencyRate exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.Currency  Sales.CountryRegionCurrency on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="Currency"
    CHILD_OWNER="Sales", CHILD_TABLE="CountryRegionCurrency"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_CountryRegionCurrency_Currency_CurrencyCode", FK_COLUMNS="CurrencyCode" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(CurrencyCode)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.CountryRegionCurrency
      WHERE
        /*  %JoinFKPK(Sales.CountryRegionCurrency,deleted," = "," AND") */
        Sales.CountryRegionCurrency.CurrencyCode = deleted.CurrencyCode
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.Currency because Sales.CountryRegionCurrency exists.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tD_CurrencyRate ON Sales.CurrencyRate FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on CurrencyRate */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.CurrencyRate  Sales.SalesOrderHeader on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00043ed5", PARENT_OWNER="Sales", PARENT_TABLE="CurrencyRate"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_CurrencyRate_CurrencyRateID", FK_COLUMNS="CurrencyRateID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeader
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeader,deleted," = "," AND") */
        Sales.SalesOrderHeader.CurrencyRateID = deleted.CurrencyRateID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.CurrencyRate because Sales.SalesOrderHeader exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.Currency  Sales.CurrencyRate on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="Currency"
    CHILD_OWNER="Sales", CHILD_TABLE="CurrencyRate"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_CurrencyRate_Currency_ToCurrencyCode", FK_COLUMNS="ToCurrencyCode" */
    IF EXISTS (SELECT * FROM deleted,Sales.Currency
      WHERE
        /* %JoinFKPK(deleted,Sales.Currency," = "," AND") */
        deleted.ToCurrencyCode = Sales.Currency.CurrencyCode AND
        NOT EXISTS (
          SELECT * FROM Sales.CurrencyRate
          WHERE
            /* %JoinFKPK(Sales.CurrencyRate,Sales.Currency," = "," AND") */
            Sales.CurrencyRate.ToCurrencyCode = Sales.Currency.CurrencyCode
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.CurrencyRate because Sales.Currency exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.Currency  Sales.CurrencyRate on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="Currency"
    CHILD_OWNER="Sales", CHILD_TABLE="CurrencyRate"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_CurrencyRate_Currency_FromCurrencyCode", FK_COLUMNS="FromCurrencyCode" */
    IF EXISTS (SELECT * FROM deleted,Sales.Currency
      WHERE
        /* %JoinFKPK(deleted,Sales.Currency," = "," AND") */
        deleted.FromCurrencyCode = Sales.Currency.CurrencyCode AND
        NOT EXISTS (
          SELECT * FROM Sales.CurrencyRate
          WHERE
            /* %JoinFKPK(Sales.CurrencyRate,Sales.Currency," = "," AND") */
            Sales.CurrencyRate.FromCurrencyCode = Sales.Currency.CurrencyCode
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.CurrencyRate because Sales.Currency exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_CurrencyRate ON Sales.CurrencyRate FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on CurrencyRate */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insCurrencyRateID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.CurrencyRate  Sales.SalesOrderHeader on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="0004723b", PARENT_OWNER="Sales", PARENT_TABLE="CurrencyRate"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_CurrencyRate_CurrencyRateID", FK_COLUMNS="CurrencyRateID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(CurrencyRateID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeader
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeader,deleted," = "," AND") */
        Sales.SalesOrderHeader.CurrencyRateID = deleted.CurrencyRateID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.CurrencyRate because Sales.SalesOrderHeader exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.Currency  Sales.CurrencyRate on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="Currency"
    CHILD_OWNER="Sales", CHILD_TABLE="CurrencyRate"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_CurrencyRate_Currency_ToCurrencyCode", FK_COLUMNS="ToCurrencyCode" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(ToCurrencyCode)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.Currency
        WHERE
          /* %JoinFKPK(inserted,Sales.Currency) */
          inserted.ToCurrencyCode = Sales.Currency.CurrencyCode
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.CurrencyRate because Sales.Currency does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.Currency  Sales.CurrencyRate on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="Currency"
    CHILD_OWNER="Sales", CHILD_TABLE="CurrencyRate"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_CurrencyRate_Currency_FromCurrencyCode", FK_COLUMNS="FromCurrencyCode" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(FromCurrencyCode)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.Currency
        WHERE
          /* %JoinFKPK(inserted,Sales.Currency) */
          inserted.FromCurrencyCode = Sales.Currency.CurrencyCode
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.CurrencyRate because Sales.Currency does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tD_Customer ON Sales.Customer FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on Customer */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.Customer  Sales.SalesOrderHeader on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00056980", PARENT_OWNER="Sales", PARENT_TABLE="Customer"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_Customer_CustomerID", FK_COLUMNS="CustomerID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeader
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeader,deleted," = "," AND") */
        Sales.SalesOrderHeader.CustomerID = deleted.CustomerID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.Customer because Sales.SalesOrderHeader exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.SalesTerritory  Sales.Customer on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Sales", CHILD_TABLE="Customer"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Customer_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
    IF EXISTS (SELECT * FROM deleted,Sales.SalesTerritory
      WHERE
        /* %JoinFKPK(deleted,Sales.SalesTerritory," = "," AND") */
        deleted.TerritoryID = Sales.SalesTerritory.TerritoryID AND
        NOT EXISTS (
          SELECT * FROM Sales.Customer
          WHERE
            /* %JoinFKPK(Sales.Customer,Sales.SalesTerritory," = "," AND") */
            Sales.Customer.TerritoryID = Sales.SalesTerritory.TerritoryID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.Customer because Sales.SalesTerritory exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.Store  Sales.Customer on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="Store"
    CHILD_OWNER="Sales", CHILD_TABLE="Customer"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Customer_Store_StoreID", FK_COLUMNS="StoreID" */
    IF EXISTS (SELECT * FROM deleted,Sales.Store
      WHERE
        /* %JoinFKPK(deleted,Sales.Store," = "," AND") */
        deleted.StoreID = Sales.Store.BusinessEntityID AND
        NOT EXISTS (
          SELECT * FROM Sales.Customer
          WHERE
            /* %JoinFKPK(Sales.Customer,Sales.Store," = "," AND") */
            Sales.Customer.StoreID = Sales.Store.BusinessEntityID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.Customer because Sales.Store exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.Person  Sales.Customer on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Sales", CHILD_TABLE="Customer"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Customer_Person_PersonID", FK_COLUMNS="PersonID" */
    IF EXISTS (SELECT * FROM deleted,Person.Person
      WHERE
        /* %JoinFKPK(deleted,Person.Person," = "," AND") */
        deleted.PersonID = Person.Person.BusinessEntityID AND
        NOT EXISTS (
          SELECT * FROM Sales.Customer
          WHERE
            /* %JoinFKPK(Sales.Customer,Person.Person," = "," AND") */
            Sales.Customer.PersonID = Person.Person.BusinessEntityID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.Customer because Person.Person exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_Customer ON Sales.Customer FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on Customer */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insCustomerID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.Customer  Sales.SalesOrderHeader on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00062221", PARENT_OWNER="Sales", PARENT_TABLE="Customer"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_Customer_CustomerID", FK_COLUMNS="CustomerID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(CustomerID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeader
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeader,deleted," = "," AND") */
        Sales.SalesOrderHeader.CustomerID = deleted.CustomerID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.Customer because Sales.SalesOrderHeader exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.SalesTerritory  Sales.Customer on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Sales", CHILD_TABLE="Customer"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Customer_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(TerritoryID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.SalesTerritory
        WHERE
          /* %JoinFKPK(inserted,Sales.SalesTerritory) */
          inserted.TerritoryID = Sales.SalesTerritory.TerritoryID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    select @nullcnt = count(*) from inserted where
      inserted.TerritoryID IS NULL
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.Customer because Sales.SalesTerritory does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.Store  Sales.Customer on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="Store"
    CHILD_OWNER="Sales", CHILD_TABLE="Customer"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Customer_Store_StoreID", FK_COLUMNS="StoreID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(StoreID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.Store
        WHERE
          /* %JoinFKPK(inserted,Sales.Store) */
          inserted.StoreID = Sales.Store.BusinessEntityID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    select @nullcnt = count(*) from inserted where
      inserted.StoreID IS NULL
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.Customer because Sales.Store does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.Person  Sales.Customer on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Sales", CHILD_TABLE="Customer"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Customer_Person_PersonID", FK_COLUMNS="PersonID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(PersonID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.Person
        WHERE
          /* %JoinFKPK(inserted,Person.Person) */
          inserted.PersonID = Person.Person.BusinessEntityID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    select @nullcnt = count(*) from inserted where
      inserted.PersonID IS NULL
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.Customer because Person.Person does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tD_EmailAddress ON Person.EmailAddress FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on EmailAddress */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Person.Person  Person.EmailAddress on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00019c35", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Person", CHILD_TABLE="EmailAddress"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_EmailAddress_Person_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (SELECT * FROM deleted,Person.Person
      WHERE
        /* %JoinFKPK(deleted,Person.Person," = "," AND") */
        deleted.BusinessEntityID = Person.Person.BusinessEntityID AND
        NOT EXISTS (
          SELECT * FROM Person.EmailAddress
          WHERE
            /* %JoinFKPK(Person.EmailAddress,Person.Person," = "," AND") */
            Person.EmailAddress.BusinessEntityID = Person.Person.BusinessEntityID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Person.EmailAddress because Person.Person exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tU_EmailAddress ON Person.EmailAddress FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on EmailAddress */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insBusinessEntityID int, 
           @insEmailAddressID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.Person  Person.EmailAddress on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00019946", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Person", CHILD_TABLE="EmailAddress"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_EmailAddress_Person_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.Person
        WHERE
          /* %JoinFKPK(inserted,Person.Person) */
          inserted.BusinessEntityID = Person.Person.BusinessEntityID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Person.EmailAddress because Person.Person does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tD_Password ON Person.Password FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on Password */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Person.Person  Person.Password on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="000179d4", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Person", CHILD_TABLE="Password"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Password_Person_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (SELECT * FROM deleted,Person.Person
      WHERE
        /* %JoinFKPK(deleted,Person.Person," = "," AND") */
        deleted.BusinessEntityID = Person.Person.BusinessEntityID AND
        NOT EXISTS (
          SELECT * FROM Person.Password
          WHERE
            /* %JoinFKPK(Person.Password,Person.Person," = "," AND") */
            Person.Password.BusinessEntityID = Person.Person.BusinessEntityID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Person.Password because Person.Person exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tU_Password ON Person.Password FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on Password */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insBusinessEntityID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.Person  Person.Password on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00019464", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Person", CHILD_TABLE="Password"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Password_Person_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.Person
        WHERE
          /* %JoinFKPK(inserted,Person.Person) */
          inserted.BusinessEntityID = Person.Person.BusinessEntityID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Person.Password because Person.Person does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER [iuPerson] ON Person
   WITH 
 EXECUTE AS CALLER  AFTER INSERT,UPDATE 
 
 NOT FOR REPLICATION 
  AS

BEGIN
    DECLARE @Count int;

    SET @Count = @@ROWCOUNT;
    IF @Count = 0 
        RETURN;

    SET NOCOUNT ON;

    IF UPDATE([BusinessEntityID]) OR UPDATE([Demographics]) 
    BEGIN
        UPDATE [Person].[Person] 
        SET [Person].[Person].[Demographics] = N'<IndividualSurvey xmlns="http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"> 
            <TotalPurchaseYTD>0.00</TotalPurchaseYTD> 
            </IndividualSurvey>' 
        FROM inserted 
        WHERE [Person].[Person].[BusinessEntityID] = inserted.[BusinessEntityID] 
            AND inserted.[Demographics] IS NULL;
        
        UPDATE [Person].[Person] 
        SET [Demographics].modify(N'declare default element namespace "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
            insert <TotalPurchaseYTD>0.00</TotalPurchaseYTD> 
            as first 
            into (/IndividualSurvey)[1]') 
        FROM inserted 
        WHERE [Person].[Person].[BusinessEntityID] = inserted.[BusinessEntityID] 
            AND inserted.[Demographics] IS NOT NULL 
            AND inserted.[Demographics].exist(N'declare default element namespace 
                "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
                /IndividualSurvey/TotalPurchaseYTD') <> 1;
    END;
END;

 
go


ENABLE TRIGGER [iuPerson] ON Person
go

CREATE TRIGGER Person.tD_Person ON Person.Person FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on Person */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Person.Person  Person.PersonPhone on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="0008ad79", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Person", CHILD_TABLE="PersonPhone"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_PersonPhone_Person_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (
      SELECT * FROM deleted,Person.PersonPhone
      WHERE
        /*  %JoinFKPK(Person.PersonPhone,deleted," = "," AND") */
        Person.PersonPhone.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.Person because Person.PersonPhone exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.Person  Sales.PersonCreditCard on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Sales", CHILD_TABLE="PersonCreditCard"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_PersonCreditCard_Person_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.PersonCreditCard
      WHERE
        /*  %JoinFKPK(Sales.PersonCreditCard,deleted," = "," AND") */
        Sales.PersonCreditCard.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.Person because Sales.PersonCreditCard exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.Person  Person.Password on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Person", CHILD_TABLE="Password"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Password_Person_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (
      SELECT * FROM deleted,Person.Password
      WHERE
        /*  %JoinFKPK(Person.Password,deleted," = "," AND") */
        Person.Password.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.Person because Person.Password exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.Person  Person.EmailAddress on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Person", CHILD_TABLE="EmailAddress"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_EmailAddress_Person_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (
      SELECT * FROM deleted,Person.EmailAddress
      WHERE
        /*  %JoinFKPK(Person.EmailAddress,deleted," = "," AND") */
        Person.EmailAddress.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.Person because Person.EmailAddress exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.Person  Sales.Customer on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Sales", CHILD_TABLE="Customer"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Customer_Person_PersonID", FK_COLUMNS="PersonID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.Customer
      WHERE
        /*  %JoinFKPK(Sales.Customer,deleted," = "," AND") */
        Sales.Customer.PersonID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.Person because Sales.Customer exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.Person  Person.BusinessEntityContact on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityContact"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityContact_Person_PersonID", FK_COLUMNS="PersonID" */
    IF EXISTS (
      SELECT * FROM deleted,Person.BusinessEntityContact
      WHERE
        /*  %JoinFKPK(Person.BusinessEntityContact,deleted," = "," AND") */
        Person.BusinessEntityContact.PersonID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.Person because Person.BusinessEntityContact exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.BusinessEntity  Person.Person on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="BusinessEntity"
    CHILD_OWNER="Person", CHILD_TABLE="Person"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Person_BusinessEntity_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (SELECT * FROM deleted,Person.BusinessEntity
      WHERE
        /* %JoinFKPK(deleted,Person.BusinessEntity," = "," AND") */
        deleted.BusinessEntityID = Person.BusinessEntity.BusinessEntityID AND
        NOT EXISTS (
          SELECT * FROM Person.Person
          WHERE
            /* %JoinFKPK(Person.Person,Person.BusinessEntity," = "," AND") */
            Person.Person.BusinessEntityID = Person.BusinessEntity.BusinessEntityID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Person.Person because Person.BusinessEntity exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tU_Person ON Person.Person FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on Person */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insBusinessEntityID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.Person  Person.PersonPhone on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00095e6e", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Person", CHILD_TABLE="PersonPhone"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_PersonPhone_Person_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Person.PersonPhone
      WHERE
        /*  %JoinFKPK(Person.PersonPhone,deleted," = "," AND") */
        Person.PersonPhone.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.Person because Person.PersonPhone exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.Person  Sales.PersonCreditCard on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Sales", CHILD_TABLE="PersonCreditCard"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_PersonCreditCard_Person_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.PersonCreditCard
      WHERE
        /*  %JoinFKPK(Sales.PersonCreditCard,deleted," = "," AND") */
        Sales.PersonCreditCard.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.Person because Sales.PersonCreditCard exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.Person  Person.Password on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Person", CHILD_TABLE="Password"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Password_Person_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Person.Password
      WHERE
        /*  %JoinFKPK(Person.Password,deleted," = "," AND") */
        Person.Password.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.Person because Person.Password exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.Person  Person.EmailAddress on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Person", CHILD_TABLE="EmailAddress"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_EmailAddress_Person_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Person.EmailAddress
      WHERE
        /*  %JoinFKPK(Person.EmailAddress,deleted," = "," AND") */
        Person.EmailAddress.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.Person because Person.EmailAddress exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.Person  Sales.Customer on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Sales", CHILD_TABLE="Customer"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Customer_Person_PersonID", FK_COLUMNS="PersonID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.Customer
      WHERE
        /*  %JoinFKPK(Sales.Customer,deleted," = "," AND") */
        Sales.Customer.PersonID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.Person because Sales.Customer exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.Person  Person.BusinessEntityContact on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Person", CHILD_TABLE="BusinessEntityContact"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_BusinessEntityContact_Person_PersonID", FK_COLUMNS="PersonID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Person.BusinessEntityContact
      WHERE
        /*  %JoinFKPK(Person.BusinessEntityContact,deleted," = "," AND") */
        Person.BusinessEntityContact.PersonID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.Person because Person.BusinessEntityContact exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.BusinessEntity  Person.Person on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="BusinessEntity"
    CHILD_OWNER="Person", CHILD_TABLE="Person"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Person_BusinessEntity_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.BusinessEntity
        WHERE
          /* %JoinFKPK(inserted,Person.BusinessEntity) */
          inserted.BusinessEntityID = Person.BusinessEntity.BusinessEntityID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Person.Person because Person.BusinessEntity does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tD_PersonCreditCard ON Sales.PersonCreditCard FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on PersonCreditCard */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.CreditCard  Sales.PersonCreditCard on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00033b69", PARENT_OWNER="Sales", PARENT_TABLE="CreditCard"
    CHILD_OWNER="Sales", CHILD_TABLE="PersonCreditCard"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_PersonCreditCard_CreditCard_CreditCardID", FK_COLUMNS="CreditCardID" */
    IF EXISTS (SELECT * FROM deleted,Sales.CreditCard
      WHERE
        /* %JoinFKPK(deleted,Sales.CreditCard," = "," AND") */
        deleted.CreditCardID = Sales.CreditCard.CreditCardID AND
        NOT EXISTS (
          SELECT * FROM Sales.PersonCreditCard
          WHERE
            /* %JoinFKPK(Sales.PersonCreditCard,Sales.CreditCard," = "," AND") */
            Sales.PersonCreditCard.CreditCardID = Sales.CreditCard.CreditCardID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.PersonCreditCard because Sales.CreditCard exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.Person  Sales.PersonCreditCard on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Sales", CHILD_TABLE="PersonCreditCard"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_PersonCreditCard_Person_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (SELECT * FROM deleted,Person.Person
      WHERE
        /* %JoinFKPK(deleted,Person.Person," = "," AND") */
        deleted.BusinessEntityID = Person.Person.BusinessEntityID AND
        NOT EXISTS (
          SELECT * FROM Sales.PersonCreditCard
          WHERE
            /* %JoinFKPK(Sales.PersonCreditCard,Person.Person," = "," AND") */
            Sales.PersonCreditCard.BusinessEntityID = Person.Person.BusinessEntityID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.PersonCreditCard because Person.Person exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_PersonCreditCard ON Sales.PersonCreditCard FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on PersonCreditCard */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insBusinessEntityID int, 
           @insCreditCardID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.CreditCard  Sales.PersonCreditCard on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00032a37", PARENT_OWNER="Sales", PARENT_TABLE="CreditCard"
    CHILD_OWNER="Sales", CHILD_TABLE="PersonCreditCard"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_PersonCreditCard_CreditCard_CreditCardID", FK_COLUMNS="CreditCardID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(CreditCardID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.CreditCard
        WHERE
          /* %JoinFKPK(inserted,Sales.CreditCard) */
          inserted.CreditCardID = Sales.CreditCard.CreditCardID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.PersonCreditCard because Sales.CreditCard does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.Person  Sales.PersonCreditCard on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Sales", CHILD_TABLE="PersonCreditCard"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_PersonCreditCard_Person_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.Person
        WHERE
          /* %JoinFKPK(inserted,Person.Person) */
          inserted.BusinessEntityID = Person.Person.BusinessEntityID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.PersonCreditCard because Person.Person does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tD_PersonPhone ON Person.PersonPhone FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on PersonPhone */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Person.PhoneNumberType  Person.PersonPhone on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="0003317e", PARENT_OWNER="Person", PARENT_TABLE="PhoneNumberType"
    CHILD_OWNER="Person", CHILD_TABLE="PersonPhone"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_PersonPhone_PhoneNumberType_PhoneNumberTypeID", FK_COLUMNS="PhoneNumberTypeID" */
    IF EXISTS (SELECT * FROM deleted,Person.PhoneNumberType
      WHERE
        /* %JoinFKPK(deleted,Person.PhoneNumberType," = "," AND") */
        deleted.PhoneNumberTypeID = Person.PhoneNumberType.PhoneNumberTypeID AND
        NOT EXISTS (
          SELECT * FROM Person.PersonPhone
          WHERE
            /* %JoinFKPK(Person.PersonPhone,Person.PhoneNumberType," = "," AND") */
            Person.PersonPhone.PhoneNumberTypeID = Person.PhoneNumberType.PhoneNumberTypeID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Person.PersonPhone because Person.PhoneNumberType exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.Person  Person.PersonPhone on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Person", CHILD_TABLE="PersonPhone"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_PersonPhone_Person_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (SELECT * FROM deleted,Person.Person
      WHERE
        /* %JoinFKPK(deleted,Person.Person," = "," AND") */
        deleted.BusinessEntityID = Person.Person.BusinessEntityID AND
        NOT EXISTS (
          SELECT * FROM Person.PersonPhone
          WHERE
            /* %JoinFKPK(Person.PersonPhone,Person.Person," = "," AND") */
            Person.PersonPhone.BusinessEntityID = Person.Person.BusinessEntityID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Person.PersonPhone because Person.Person exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tU_PersonPhone ON Person.PersonPhone FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on PersonPhone */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insBusinessEntityID int, 
           @insPhoneNumber Phone, 
           @insPhoneNumberTypeID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.PhoneNumberType  Person.PersonPhone on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00034368", PARENT_OWNER="Person", PARENT_TABLE="PhoneNumberType"
    CHILD_OWNER="Person", CHILD_TABLE="PersonPhone"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_PersonPhone_PhoneNumberType_PhoneNumberTypeID", FK_COLUMNS="PhoneNumberTypeID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(PhoneNumberTypeID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.PhoneNumberType
        WHERE
          /* %JoinFKPK(inserted,Person.PhoneNumberType) */
          inserted.PhoneNumberTypeID = Person.PhoneNumberType.PhoneNumberTypeID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Person.PersonPhone because Person.PhoneNumberType does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.Person  Person.PersonPhone on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Person"
    CHILD_OWNER="Person", CHILD_TABLE="PersonPhone"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_PersonPhone_Person_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.Person
        WHERE
          /* %JoinFKPK(inserted,Person.Person) */
          inserted.BusinessEntityID = Person.Person.BusinessEntityID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Person.PersonPhone because Person.Person does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tD_PhoneNumberType ON Person.PhoneNumberType FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on PhoneNumberType */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Person.PhoneNumberType  Person.PersonPhone on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="000156e8", PARENT_OWNER="Person", PARENT_TABLE="PhoneNumberType"
    CHILD_OWNER="Person", CHILD_TABLE="PersonPhone"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_PersonPhone_PhoneNumberType_PhoneNumberTypeID", FK_COLUMNS="PhoneNumberTypeID" */
    IF EXISTS (
      SELECT * FROM deleted,Person.PersonPhone
      WHERE
        /*  %JoinFKPK(Person.PersonPhone,deleted," = "," AND") */
        Person.PersonPhone.PhoneNumberTypeID = deleted.PhoneNumberTypeID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.PhoneNumberType because Person.PersonPhone exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tU_PhoneNumberType ON Person.PhoneNumberType FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on PhoneNumberType */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insPhoneNumberTypeID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.PhoneNumberType  Person.PersonPhone on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="0001704a", PARENT_OWNER="Person", PARENT_TABLE="PhoneNumberType"
    CHILD_OWNER="Person", CHILD_TABLE="PersonPhone"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_PersonPhone_PhoneNumberType_PhoneNumberTypeID", FK_COLUMNS="PhoneNumberTypeID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(PhoneNumberTypeID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Person.PersonPhone
      WHERE
        /*  %JoinFKPK(Person.PersonPhone,deleted," = "," AND") */
        Person.PersonPhone.PhoneNumberTypeID = deleted.PhoneNumberTypeID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.PhoneNumberType because Person.PersonPhone exists.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER [iduSalesOrderDetail] ON SalesOrderDetail
   WITH 
 EXECUTE AS CALLER  AFTER DELETE,INSERT,UPDATE 
  
  AS

BEGIN
    DECLARE @Count int;

    SET @Count = @@ROWCOUNT;
    IF @Count = 0 
        RETURN;

    SET NOCOUNT ON;

    BEGIN TRY
        -- If inserting or updating these columns
        IF UPDATE([ProductID]) OR UPDATE([OrderQty]) OR UPDATE([UnitPrice]) OR UPDATE([UnitPriceDiscount]) 
        -- Insert record into TransactionHistory
        BEGIN
            INSERT INTO [Production].[TransactionHistory]
                ([ProductID]
                ,[ReferenceOrderID]
                ,[ReferenceOrderLineID]
                ,[TransactionType]
                ,[TransactionDate]
                ,[Quantity]
                ,[ActualCost])
            SELECT 
                inserted.[ProductID]
                ,inserted.[SalesOrderID]
                ,inserted.[SalesOrderDetailID]
                ,'S'
                ,GETDATE()
                ,inserted.[OrderQty]
                ,inserted.[UnitPrice]
            FROM inserted 
                INNER JOIN [Sales].[SalesOrderHeader] 
                ON inserted.[SalesOrderID] = [Sales].[SalesOrderHeader].[SalesOrderID];

            UPDATE [Person].[Person] 
            SET [Demographics].modify('declare default element namespace 
                "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
                replace value of (/IndividualSurvey/TotalPurchaseYTD)[1] 
                with data(/IndividualSurvey/TotalPurchaseYTD)[1] + sql:column ("inserted.LineTotal")') 
            FROM inserted 
                INNER JOIN [Sales].[SalesOrderHeader] AS SOH
                ON inserted.[SalesOrderID] = SOH.[SalesOrderID] 
                INNER JOIN [Sales].[Customer] AS C
                ON SOH.[CustomerID] = C.[CustomerID]
            WHERE C.[PersonID] = [Person].[Person].[BusinessEntityID];
        END;

        -- Update SubTotal in SalesOrderHeader record. Note that this causes the 
        -- SalesOrderHeader trigger to fire which will update the RevisionNumber.
        UPDATE [Sales].[SalesOrderHeader]
        SET [Sales].[SalesOrderHeader].[SubTotal] = 
            (SELECT SUM([Sales].[SalesOrderDetail].[LineTotal])
                FROM [Sales].[SalesOrderDetail]
                WHERE [Sales].[SalesOrderHeader].[SalesOrderID] = [Sales].[SalesOrderDetail].[SalesOrderID])
        WHERE [Sales].[SalesOrderHeader].[SalesOrderID] IN (SELECT inserted.[SalesOrderID] FROM inserted);

        UPDATE [Person].[Person] 
        SET [Demographics].modify('declare default element namespace 
            "http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey"; 
            replace value of (/IndividualSurvey/TotalPurchaseYTD)[1] 
            with data(/IndividualSurvey/TotalPurchaseYTD)[1] - sql:column("deleted.LineTotal")') 
        FROM deleted 
            INNER JOIN [Sales].[SalesOrderHeader] 
            ON deleted.[SalesOrderID] = [Sales].[SalesOrderHeader].[SalesOrderID] 
            INNER JOIN [Sales].[Customer]
            ON [Sales].[Customer].[CustomerID] = [Sales].[SalesOrderHeader].[CustomerID]
        WHERE [Sales].[Customer].[PersonID] = [Person].[Person].[BusinessEntityID];
    END TRY
    BEGIN CATCH
        EXECUTE [dbo].[uspPrintError];

        -- Rollback any active or uncommittable transactions before
        -- inserting information in the ErrorLog
        IF @@TRANCOUNT > 0
        BEGIN
            ROLLBACK TRANSACTION;
        END

        EXECUTE [dbo].[uspLogError];
    END CATCH;
END;

 
go


ENABLE TRIGGER [iduSalesOrderDetail] ON SalesOrderDetail
go

CREATE TRIGGER Sales.tD_SalesOrderDetail ON Sales.SalesOrderDetail FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on SalesOrderDetail */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.SpecialOfferProduct  Sales.SalesOrderDetail on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="0003b316", PARENT_OWNER="Sales", PARENT_TABLE="SpecialOfferProduct"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderDetail"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderDetail_SpecialOfferProduct_SpecialOfferIDProductID", FK_COLUMNS="SpecialOfferID""ProductID" */
    IF EXISTS (SELECT * FROM deleted,Sales.SpecialOfferProduct
      WHERE
        /* %JoinFKPK(deleted,Sales.SpecialOfferProduct," = "," AND") */
        deleted.SpecialOfferID = Sales.SpecialOfferProduct.SpecialOfferID AND
        deleted.ProductID = Sales.SpecialOfferProduct.ProductID AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesOrderDetail
          WHERE
            /* %JoinFKPK(Sales.SalesOrderDetail,Sales.SpecialOfferProduct," = "," AND") */
            Sales.SalesOrderDetail.SpecialOfferID = Sales.SpecialOfferProduct.SpecialOfferID AND
            Sales.SalesOrderDetail.ProductID = Sales.SpecialOfferProduct.ProductID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesOrderDetail because Sales.SpecialOfferProduct exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.SalesOrderHeader  Sales.SalesOrderDetail on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesOrderHeader"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderDetail"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderDetail_SalesOrderHeader_SalesOrderID", FK_COLUMNS="SalesOrderID" */
    IF EXISTS (SELECT * FROM deleted,Sales.SalesOrderHeader
      WHERE
        /* %JoinFKPK(deleted,Sales.SalesOrderHeader," = "," AND") */
        deleted.SalesOrderID = Sales.SalesOrderHeader.SalesOrderID AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesOrderDetail
          WHERE
            /* %JoinFKPK(Sales.SalesOrderDetail,Sales.SalesOrderHeader," = "," AND") */
            Sales.SalesOrderDetail.SalesOrderID = Sales.SalesOrderHeader.SalesOrderID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesOrderDetail because Sales.SalesOrderHeader exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_SalesOrderDetail ON Sales.SalesOrderDetail FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesOrderDetail */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insSalesOrderID int, 
           @insSalesOrderDetailID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.SpecialOfferProduct  Sales.SalesOrderDetail on child update no action */
  /* ERWIN_RELATION:CHECKSUM="0003a2f6", PARENT_OWNER="Sales", PARENT_TABLE="SpecialOfferProduct"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderDetail"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderDetail_SpecialOfferProduct_SpecialOfferIDProductID", FK_COLUMNS="SpecialOfferID""ProductID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(SpecialOfferID) OR
    UPDATE(ProductID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.SpecialOfferProduct
        WHERE
          /* %JoinFKPK(inserted,Sales.SpecialOfferProduct) */
          inserted.SpecialOfferID = Sales.SpecialOfferProduct.SpecialOfferID and
          inserted.ProductID = Sales.SpecialOfferProduct.ProductID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesOrderDetail because Sales.SpecialOfferProduct does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.SalesOrderHeader  Sales.SalesOrderDetail on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesOrderHeader"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderDetail"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderDetail_SalesOrderHeader_SalesOrderID", FK_COLUMNS="SalesOrderID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(SalesOrderID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.SalesOrderHeader
        WHERE
          /* %JoinFKPK(inserted,Sales.SalesOrderHeader) */
          inserted.SalesOrderID = Sales.SalesOrderHeader.SalesOrderID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesOrderDetail because Sales.SalesOrderHeader does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER [uSalesOrderHeader] ON SalesOrderHeader
   WITH 
 EXECUTE AS CALLER  AFTER UPDATE 
 
 NOT FOR REPLICATION 
  AS

BEGIN
    DECLARE @Count int;

    SET @Count = @@ROWCOUNT;
    IF @Count = 0 
        RETURN;

    SET NOCOUNT ON;

    BEGIN TRY
        -- Update RevisionNumber for modification of any field EXCEPT the Status.
        IF NOT UPDATE([Status])
        BEGIN
            UPDATE [Sales].[SalesOrderHeader]
            SET [Sales].[SalesOrderHeader].[RevisionNumber] = 
                [Sales].[SalesOrderHeader].[RevisionNumber] + 1
            WHERE [Sales].[SalesOrderHeader].[SalesOrderID] IN 
                (SELECT inserted.[SalesOrderID] FROM inserted);
        END;

        -- Update the SalesPerson SalesYTD when SubTotal is updated
        IF UPDATE([SubTotal])
        BEGIN
            DECLARE @StartDate datetime,
                    @EndDate datetime

            SET @StartDate = [dbo].[ufnGetAccountingStartDate]();
            SET @EndDate = [dbo].[ufnGetAccountingEndDate]();

            UPDATE [Sales].[SalesPerson]
            SET [Sales].[SalesPerson].[SalesYTD] = 
                (SELECT SUM([Sales].[SalesOrderHeader].[SubTotal])
                FROM [Sales].[SalesOrderHeader] 
                WHERE [Sales].[SalesPerson].[BusinessEntityID] = [Sales].[SalesOrderHeader].[SalesPersonID]
                    AND ([Sales].[SalesOrderHeader].[Status] = 5) -- Shipped
                    AND [Sales].[SalesOrderHeader].[OrderDate] BETWEEN @StartDate AND @EndDate)
            WHERE [Sales].[SalesPerson].[BusinessEntityID] 
                IN (SELECT DISTINCT inserted.[SalesPersonID] FROM inserted 
                    WHERE inserted.[OrderDate] BETWEEN @StartDate AND @EndDate);

            -- Update the SalesTerritory SalesYTD when SubTotal is updated
            UPDATE [Sales].[SalesTerritory]
            SET [Sales].[SalesTerritory].[SalesYTD] = 
                (SELECT SUM([Sales].[SalesOrderHeader].[SubTotal])
                FROM [Sales].[SalesOrderHeader] 
                WHERE [Sales].[SalesTerritory].[TerritoryID] = [Sales].[SalesOrderHeader].[TerritoryID]
                    AND ([Sales].[SalesOrderHeader].[Status] = 5) -- Shipped
                    AND [Sales].[SalesOrderHeader].[OrderDate] BETWEEN @StartDate AND @EndDate)
            WHERE [Sales].[SalesTerritory].[TerritoryID] 
                IN (SELECT DISTINCT inserted.[TerritoryID] FROM inserted 
                    WHERE inserted.[OrderDate] BETWEEN @StartDate AND @EndDate);
        END;
    END TRY
    BEGIN CATCH
        EXECUTE [dbo].[uspPrintError];

        -- Rollback any active or uncommittable transactions before
        -- inserting information in the ErrorLog
        IF @@TRANCOUNT > 0
        BEGIN
            ROLLBACK TRANSACTION;
        END

        EXECUTE [dbo].[uspLogError];
    END CATCH;
END;

 
go


ENABLE TRIGGER [uSalesOrderHeader] ON SalesOrderHeader
go

CREATE TRIGGER Sales.tD_SalesOrderHeader ON Sales.SalesOrderHeader FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on SalesOrderHeader */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.SalesOrderHeader  Sales.SalesOrderHeaderSalesReason on parent delete cascade */
    /* ERWIN_RELATION:CHECKSUM="000cefc6", PARENT_OWNER="Sales", PARENT_TABLE="SalesOrderHeader"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeaderSalesReason"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeaderSalesReason_SalesOrderHeader_SalesOrderID", FK_COLUMNS="SalesOrderID" */
    DELETE Sales.SalesOrderHeaderSalesReason
      FROM Sales.SalesOrderHeaderSalesReason,deleted
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeaderSalesReason,deleted," = "," AND") */
        Sales.SalesOrderHeaderSalesReason.SalesOrderID = deleted.SalesOrderID

    /* erwin Builtin Trigger */
    /* Sales.SalesOrderHeader  Sales.SalesOrderDetail on parent delete cascade */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesOrderHeader"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderDetail"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderDetail_SalesOrderHeader_SalesOrderID", FK_COLUMNS="SalesOrderID" */
    DELETE Sales.SalesOrderDetail
      FROM Sales.SalesOrderDetail,deleted
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderDetail,deleted," = "," AND") */
        Sales.SalesOrderDetail.SalesOrderID = deleted.SalesOrderID

    /* erwin Builtin Trigger */
    /* Sales.SalesTerritory  Sales.SalesOrderHeader on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
    IF EXISTS (SELECT * FROM deleted,Sales.SalesTerritory
      WHERE
        /* %JoinFKPK(deleted,Sales.SalesTerritory," = "," AND") */
        deleted.TerritoryID = Sales.SalesTerritory.TerritoryID AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesOrderHeader
          WHERE
            /* %JoinFKPK(Sales.SalesOrderHeader,Sales.SalesTerritory," = "," AND") */
            Sales.SalesOrderHeader.TerritoryID = Sales.SalesTerritory.TerritoryID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesOrderHeader because Sales.SalesTerritory exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.SalesPerson  Sales.SalesOrderHeader on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesPerson"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_SalesPerson_SalesPersonID", FK_COLUMNS="SalesPersonID" */
    IF EXISTS (SELECT * FROM deleted,Sales.SalesPerson
      WHERE
        /* %JoinFKPK(deleted,Sales.SalesPerson," = "," AND") */
        deleted.SalesPersonID = Sales.SalesPerson.BusinessEntityID AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesOrderHeader
          WHERE
            /* %JoinFKPK(Sales.SalesOrderHeader,Sales.SalesPerson," = "," AND") */
            Sales.SalesOrderHeader.SalesPersonID = Sales.SalesPerson.BusinessEntityID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesOrderHeader because Sales.SalesPerson exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.Customer  Sales.SalesOrderHeader on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="Customer"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_Customer_CustomerID", FK_COLUMNS="CustomerID" */
    IF EXISTS (SELECT * FROM deleted,Sales.Customer
      WHERE
        /* %JoinFKPK(deleted,Sales.Customer," = "," AND") */
        deleted.CustomerID = Sales.Customer.CustomerID AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesOrderHeader
          WHERE
            /* %JoinFKPK(Sales.SalesOrderHeader,Sales.Customer," = "," AND") */
            Sales.SalesOrderHeader.CustomerID = Sales.Customer.CustomerID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesOrderHeader because Sales.Customer exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.CurrencyRate  Sales.SalesOrderHeader on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="CurrencyRate"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_CurrencyRate_CurrencyRateID", FK_COLUMNS="CurrencyRateID" */
    IF EXISTS (SELECT * FROM deleted,Sales.CurrencyRate
      WHERE
        /* %JoinFKPK(deleted,Sales.CurrencyRate," = "," AND") */
        deleted.CurrencyRateID = Sales.CurrencyRate.CurrencyRateID AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesOrderHeader
          WHERE
            /* %JoinFKPK(Sales.SalesOrderHeader,Sales.CurrencyRate," = "," AND") */
            Sales.SalesOrderHeader.CurrencyRateID = Sales.CurrencyRate.CurrencyRateID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesOrderHeader because Sales.CurrencyRate exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.CreditCard  Sales.SalesOrderHeader on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="CreditCard"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_CreditCard_CreditCardID", FK_COLUMNS="CreditCardID" */
    IF EXISTS (SELECT * FROM deleted,Sales.CreditCard
      WHERE
        /* %JoinFKPK(deleted,Sales.CreditCard," = "," AND") */
        deleted.CreditCardID = Sales.CreditCard.CreditCardID AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesOrderHeader
          WHERE
            /* %JoinFKPK(Sales.SalesOrderHeader,Sales.CreditCard," = "," AND") */
            Sales.SalesOrderHeader.CreditCardID = Sales.CreditCard.CreditCardID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesOrderHeader because Sales.CreditCard exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.Address  Sales.SalesOrderHeader on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Address"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_Address_ShipToAddressID", FK_COLUMNS="ShipToAddressID" */
    IF EXISTS (SELECT * FROM deleted,Person.Address
      WHERE
        /* %JoinFKPK(deleted,Person.Address," = "," AND") */
        deleted.ShipToAddressID = Person.Address.AddressID AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesOrderHeader
          WHERE
            /* %JoinFKPK(Sales.SalesOrderHeader,Person.Address," = "," AND") */
            Sales.SalesOrderHeader.ShipToAddressID = Person.Address.AddressID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesOrderHeader because Person.Address exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.Address  Sales.SalesOrderHeader on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="Address"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_Address_BillToAddressID", FK_COLUMNS="BillToAddressID" */
    IF EXISTS (SELECT * FROM deleted,Person.Address
      WHERE
        /* %JoinFKPK(deleted,Person.Address," = "," AND") */
        deleted.BillToAddressID = Person.Address.AddressID AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesOrderHeader
          WHERE
            /* %JoinFKPK(Sales.SalesOrderHeader,Person.Address," = "," AND") */
            Sales.SalesOrderHeader.BillToAddressID = Person.Address.AddressID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesOrderHeader because Person.Address exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_SalesOrderHeader ON Sales.SalesOrderHeader FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesOrderHeader */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insSalesOrderID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.SalesOrderHeader  Sales.SalesOrderDetail on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00016fa1", PARENT_OWNER="Sales", PARENT_TABLE="SalesOrderHeader"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderDetail"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderDetail_SalesOrderHeader_SalesOrderID", FK_COLUMNS="SalesOrderID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(SalesOrderID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderDetail
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderDetail,deleted," = "," AND") */
        Sales.SalesOrderDetail.SalesOrderID = deleted.SalesOrderID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.SalesOrderHeader because Sales.SalesOrderDetail exists.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.Trigger_1457 ON Sales.SalesOrderHeader FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesOrderHeader */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insSalesOrderID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.Address  Sales.SalesOrderHeader on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00019f63", PARENT_OWNER="Person", PARENT_TABLE="Address"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_Address_BillToAddressID", FK_COLUMNS="BillToAddressID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(BillToAddressID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.Address
        WHERE
          /* %JoinFKPK(inserted,Person.Address) */
          inserted.BillToAddressID = Person.Address.AddressID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesOrderHeader because Person.Address does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.Trigger_1458 ON Sales.SalesOrderHeader FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesOrderHeader */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insSalesOrderID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.Address  Sales.SalesOrderHeader on child update no action */
  /* ERWIN_RELATION:CHECKSUM="000198d0", PARENT_OWNER="Person", PARENT_TABLE="Address"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_Address_ShipToAddressID", FK_COLUMNS="ShipToAddressID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(ShipToAddressID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.Address
        WHERE
          /* %JoinFKPK(inserted,Person.Address) */
          inserted.ShipToAddressID = Person.Address.AddressID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesOrderHeader because Person.Address does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.Trigger_1459 ON Sales.SalesOrderHeader FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesOrderHeader */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insSalesOrderID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.CreditCard  Sales.SalesOrderHeader on child update no action */
  /* ERWIN_RELATION:CHECKSUM="0001d14b", PARENT_OWNER="Sales", PARENT_TABLE="CreditCard"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_CreditCard_CreditCardID", FK_COLUMNS="CreditCardID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(CreditCardID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.CreditCard
        WHERE
          /* %JoinFKPK(inserted,Sales.CreditCard) */
          inserted.CreditCardID = Sales.CreditCard.CreditCardID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    select @nullcnt = count(*) from inserted where
      inserted.CreditCardID IS NULL
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesOrderHeader because Sales.CreditCard does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.Trigger_1460 ON Sales.SalesOrderHeader FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesOrderHeader */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insSalesOrderID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.CurrencyRate  Sales.SalesOrderHeader on child update no action */
  /* ERWIN_RELATION:CHECKSUM="0001cbf7", PARENT_OWNER="Sales", PARENT_TABLE="CurrencyRate"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_CurrencyRate_CurrencyRateID", FK_COLUMNS="CurrencyRateID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(CurrencyRateID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.CurrencyRate
        WHERE
          /* %JoinFKPK(inserted,Sales.CurrencyRate) */
          inserted.CurrencyRateID = Sales.CurrencyRate.CurrencyRateID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    select @nullcnt = count(*) from inserted where
      inserted.CurrencyRateID IS NULL
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesOrderHeader because Sales.CurrencyRate does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.Trigger_1461 ON Sales.SalesOrderHeader FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesOrderHeader */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insSalesOrderID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.Customer  Sales.SalesOrderHeader on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00019301", PARENT_OWNER="Sales", PARENT_TABLE="Customer"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_Customer_CustomerID", FK_COLUMNS="CustomerID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(CustomerID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.Customer
        WHERE
          /* %JoinFKPK(inserted,Sales.Customer) */
          inserted.CustomerID = Sales.Customer.CustomerID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesOrderHeader because Sales.Customer does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.Trigger_1462 ON Sales.SalesOrderHeader FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesOrderHeader */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insSalesOrderID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.SalesPerson  Sales.SalesOrderHeader on child update no action */
  /* ERWIN_RELATION:CHECKSUM="0001cb43", PARENT_OWNER="Sales", PARENT_TABLE="SalesPerson"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_SalesPerson_SalesPersonID", FK_COLUMNS="SalesPersonID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(SalesPersonID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.SalesPerson
        WHERE
          /* %JoinFKPK(inserted,Sales.SalesPerson) */
          inserted.SalesPersonID = Sales.SalesPerson.BusinessEntityID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    select @nullcnt = count(*) from inserted where
      inserted.SalesPersonID IS NULL
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesOrderHeader because Sales.SalesPerson does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.Trigger_1463 ON Sales.SalesOrderHeader FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesOrderHeader */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insSalesOrderID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.SalesTerritory  Sales.SalesOrderHeader on child update no action */
  /* ERWIN_RELATION:CHECKSUM="0001c536", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(TerritoryID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.SalesTerritory
        WHERE
          /* %JoinFKPK(inserted,Sales.SalesTerritory) */
          inserted.TerritoryID = Sales.SalesTerritory.TerritoryID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    select @nullcnt = count(*) from inserted where
      inserted.TerritoryID IS NULL
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesOrderHeader because Sales.SalesTerritory does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.Trigger_1470 ON Sales.SalesOrderHeader FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesOrderHeader */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insSalesOrderID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.SalesOrderHeader  Sales.SalesOrderHeaderSalesReason on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="000198e0", PARENT_OWNER="Sales", PARENT_TABLE="SalesOrderHeader"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeaderSalesReason"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeaderSalesReason_SalesOrderHeader_SalesOrderID", FK_COLUMNS="SalesOrderID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(SalesOrderID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeaderSalesReason
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeaderSalesReason,deleted," = "," AND") */
        Sales.SalesOrderHeaderSalesReason.SalesOrderID = deleted.SalesOrderID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.SalesOrderHeader because Sales.SalesOrderHeaderSalesReason exists.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tD_SalesOrderHeaderSalesReason ON Sales.SalesOrderHeaderSalesReason FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on SalesOrderHeaderSalesReason */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.SalesOrderHeader  Sales.SalesOrderHeaderSalesReason on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00038380", PARENT_OWNER="Sales", PARENT_TABLE="SalesOrderHeader"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeaderSalesReason"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeaderSalesReason_SalesOrderHeader_SalesOrderID", FK_COLUMNS="SalesOrderID" */
    IF EXISTS (SELECT * FROM deleted,Sales.SalesOrderHeader
      WHERE
        /* %JoinFKPK(deleted,Sales.SalesOrderHeader," = "," AND") */
        deleted.SalesOrderID = Sales.SalesOrderHeader.SalesOrderID AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesOrderHeaderSalesReason
          WHERE
            /* %JoinFKPK(Sales.SalesOrderHeaderSalesReason,Sales.SalesOrderHeader," = "," AND") */
            Sales.SalesOrderHeaderSalesReason.SalesOrderID = Sales.SalesOrderHeader.SalesOrderID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesOrderHeaderSalesReason because Sales.SalesOrderHeader exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.SalesReason  Sales.SalesOrderHeaderSalesReason on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesReason"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeaderSalesReason"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeaderSalesReason_SalesReason_SalesReasonID", FK_COLUMNS="SalesReasonID" */
    IF EXISTS (SELECT * FROM deleted,Sales.SalesReason
      WHERE
        /* %JoinFKPK(deleted,Sales.SalesReason," = "," AND") */
        deleted.SalesReasonID = Sales.SalesReason.SalesReasonID AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesOrderHeaderSalesReason
          WHERE
            /* %JoinFKPK(Sales.SalesOrderHeaderSalesReason,Sales.SalesReason," = "," AND") */
            Sales.SalesOrderHeaderSalesReason.SalesReasonID = Sales.SalesReason.SalesReasonID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesOrderHeaderSalesReason because Sales.SalesReason exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_SalesOrderHeaderSalesReason ON Sales.SalesOrderHeaderSalesReason FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesOrderHeaderSalesReason */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insSalesOrderID int, 
           @insSalesReasonID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.SalesOrderHeader  Sales.SalesOrderHeaderSalesReason on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00036eaf", PARENT_OWNER="Sales", PARENT_TABLE="SalesOrderHeader"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeaderSalesReason"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeaderSalesReason_SalesOrderHeader_SalesOrderID", FK_COLUMNS="SalesOrderID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(SalesOrderID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.SalesOrderHeader
        WHERE
          /* %JoinFKPK(inserted,Sales.SalesOrderHeader) */
          inserted.SalesOrderID = Sales.SalesOrderHeader.SalesOrderID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesOrderHeaderSalesReason because Sales.SalesOrderHeader does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.SalesReason  Sales.SalesOrderHeaderSalesReason on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesReason"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeaderSalesReason"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeaderSalesReason_SalesReason_SalesReasonID", FK_COLUMNS="SalesReasonID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(SalesReasonID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.SalesReason
        WHERE
          /* %JoinFKPK(inserted,Sales.SalesReason) */
          inserted.SalesReasonID = Sales.SalesReason.SalesReasonID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesOrderHeaderSalesReason because Sales.SalesReason does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tD_SalesPerson ON Sales.SalesPerson FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on SalesPerson */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.SalesPerson  Sales.Store on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00069406", PARENT_OWNER="Sales", PARENT_TABLE="SalesPerson"
    CHILD_OWNER="Sales", CHILD_TABLE="Store"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Store_SalesPerson_SalesPersonID", FK_COLUMNS="SalesPersonID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.Store
      WHERE
        /*  %JoinFKPK(Sales.Store,deleted," = "," AND") */
        Sales.Store.SalesPersonID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.SalesPerson because Sales.Store exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.SalesPerson  Sales.SalesTerritoryHistory on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesPerson"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesTerritoryHistory"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesTerritoryHistory_SalesPerson_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesTerritoryHistory
      WHERE
        /*  %JoinFKPK(Sales.SalesTerritoryHistory,deleted," = "," AND") */
        Sales.SalesTerritoryHistory.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.SalesPerson because Sales.SalesTerritoryHistory exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.SalesPerson  Sales.SalesPersonQuotaHistory on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesPerson"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesPersonQuotaHistory"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesPersonQuotaHistory_SalesPerson_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesPersonQuotaHistory
      WHERE
        /*  %JoinFKPK(Sales.SalesPersonQuotaHistory,deleted," = "," AND") */
        Sales.SalesPersonQuotaHistory.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.SalesPerson because Sales.SalesPersonQuotaHistory exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.SalesPerson  Sales.SalesOrderHeader on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesPerson"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_SalesPerson_SalesPersonID", FK_COLUMNS="SalesPersonID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeader
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeader,deleted," = "," AND") */
        Sales.SalesOrderHeader.SalesPersonID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.SalesPerson because Sales.SalesOrderHeader exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.SalesTerritory  Sales.SalesPerson on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesPerson"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesPerson_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
    IF EXISTS (SELECT * FROM deleted,Sales.SalesTerritory
      WHERE
        /* %JoinFKPK(deleted,Sales.SalesTerritory," = "," AND") */
        deleted.TerritoryID = Sales.SalesTerritory.TerritoryID AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesPerson
          WHERE
            /* %JoinFKPK(Sales.SalesPerson,Sales.SalesTerritory," = "," AND") */
            Sales.SalesPerson.TerritoryID = Sales.SalesTerritory.TerritoryID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesPerson because Sales.SalesTerritory exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_SalesPerson ON Sales.SalesPerson FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesPerson */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insBusinessEntityID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.SalesPerson  Sales.Store on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="000745cf", PARENT_OWNER="Sales", PARENT_TABLE="SalesPerson"
    CHILD_OWNER="Sales", CHILD_TABLE="Store"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Store_SalesPerson_SalesPersonID", FK_COLUMNS="SalesPersonID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.Store
      WHERE
        /*  %JoinFKPK(Sales.Store,deleted," = "," AND") */
        Sales.Store.SalesPersonID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.SalesPerson because Sales.Store exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.SalesPerson  Sales.SalesTerritoryHistory on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesPerson"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesTerritoryHistory"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesTerritoryHistory_SalesPerson_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesTerritoryHistory
      WHERE
        /*  %JoinFKPK(Sales.SalesTerritoryHistory,deleted," = "," AND") */
        Sales.SalesTerritoryHistory.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.SalesPerson because Sales.SalesTerritoryHistory exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.SalesPerson  Sales.SalesPersonQuotaHistory on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesPerson"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesPersonQuotaHistory"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesPersonQuotaHistory_SalesPerson_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesPersonQuotaHistory
      WHERE
        /*  %JoinFKPK(Sales.SalesPersonQuotaHistory,deleted," = "," AND") */
        Sales.SalesPersonQuotaHistory.BusinessEntityID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.SalesPerson because Sales.SalesPersonQuotaHistory exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.SalesPerson  Sales.SalesOrderHeader on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesPerson"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_SalesPerson_SalesPersonID", FK_COLUMNS="SalesPersonID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeader
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeader,deleted," = "," AND") */
        Sales.SalesOrderHeader.SalesPersonID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.SalesPerson because Sales.SalesOrderHeader exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.SalesTerritory  Sales.SalesPerson on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesPerson"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesPerson_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(TerritoryID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.SalesTerritory
        WHERE
          /* %JoinFKPK(inserted,Sales.SalesTerritory) */
          inserted.TerritoryID = Sales.SalesTerritory.TerritoryID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    select @nullcnt = count(*) from inserted where
      inserted.TerritoryID IS NULL
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesPerson because Sales.SalesTerritory does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tD_SalesPersonQuotaHistory ON Sales.SalesPersonQuotaHistory FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on SalesPersonQuotaHistory */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.SalesPerson  Sales.SalesPersonQuotaHistory on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="0001c197", PARENT_OWNER="Sales", PARENT_TABLE="SalesPerson"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesPersonQuotaHistory"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesPersonQuotaHistory_SalesPerson_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (SELECT * FROM deleted,Sales.SalesPerson
      WHERE
        /* %JoinFKPK(deleted,Sales.SalesPerson," = "," AND") */
        deleted.BusinessEntityID = Sales.SalesPerson.BusinessEntityID AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesPersonQuotaHistory
          WHERE
            /* %JoinFKPK(Sales.SalesPersonQuotaHistory,Sales.SalesPerson," = "," AND") */
            Sales.SalesPersonQuotaHistory.BusinessEntityID = Sales.SalesPerson.BusinessEntityID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesPersonQuotaHistory because Sales.SalesPerson exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_SalesPersonQuotaHistory ON Sales.SalesPersonQuotaHistory FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesPersonQuotaHistory */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insBusinessEntityID int, 
           @insQuotaDate datetime,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.SalesPerson  Sales.SalesPersonQuotaHistory on child update no action */
  /* ERWIN_RELATION:CHECKSUM="0001bbc0", PARENT_OWNER="Sales", PARENT_TABLE="SalesPerson"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesPersonQuotaHistory"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesPersonQuotaHistory_SalesPerson_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.SalesPerson
        WHERE
          /* %JoinFKPK(inserted,Sales.SalesPerson) */
          inserted.BusinessEntityID = Sales.SalesPerson.BusinessEntityID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesPersonQuotaHistory because Sales.SalesPerson does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tD_SalesReason ON Sales.SalesReason FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on SalesReason */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.SalesReason  Sales.SalesOrderHeaderSalesReason on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="0001747c", PARENT_OWNER="Sales", PARENT_TABLE="SalesReason"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeaderSalesReason"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeaderSalesReason_SalesReason_SalesReasonID", FK_COLUMNS="SalesReasonID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeaderSalesReason
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeaderSalesReason,deleted," = "," AND") */
        Sales.SalesOrderHeaderSalesReason.SalesReasonID = deleted.SalesReasonID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.SalesReason because Sales.SalesOrderHeaderSalesReason exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_SalesReason ON Sales.SalesReason FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesReason */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insSalesReasonID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.SalesReason  Sales.SalesOrderHeaderSalesReason on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00018817", PARENT_OWNER="Sales", PARENT_TABLE="SalesReason"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeaderSalesReason"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeaderSalesReason_SalesReason_SalesReasonID", FK_COLUMNS="SalesReasonID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(SalesReasonID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeaderSalesReason
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeaderSalesReason,deleted," = "," AND") */
        Sales.SalesOrderHeaderSalesReason.SalesReasonID = deleted.SalesReasonID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.SalesReason because Sales.SalesOrderHeaderSalesReason exists.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tD_SalesTaxRate ON Sales.SalesTaxRate FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on SalesTaxRate */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Person.StateProvince  Sales.SalesTaxRate on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="0001a92d", PARENT_OWNER="Person", PARENT_TABLE="StateProvince"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesTaxRate"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesTaxRate_StateProvince_StateProvinceID", FK_COLUMNS="StateProvinceID" */
    IF EXISTS (SELECT * FROM deleted,Person.StateProvince
      WHERE
        /* %JoinFKPK(deleted,Person.StateProvince," = "," AND") */
        deleted.StateProvinceID = Person.StateProvince.StateProvinceID AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesTaxRate
          WHERE
            /* %JoinFKPK(Sales.SalesTaxRate,Person.StateProvince," = "," AND") */
            Sales.SalesTaxRate.StateProvinceID = Person.StateProvince.StateProvinceID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesTaxRate because Person.StateProvince exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_SalesTaxRate ON Sales.SalesTaxRate FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesTaxRate */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insSalesTaxRateID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.StateProvince  Sales.SalesTaxRate on child update no action */
  /* ERWIN_RELATION:CHECKSUM="0001a12b", PARENT_OWNER="Person", PARENT_TABLE="StateProvince"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesTaxRate"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesTaxRate_StateProvince_StateProvinceID", FK_COLUMNS="StateProvinceID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(StateProvinceID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.StateProvince
        WHERE
          /* %JoinFKPK(inserted,Person.StateProvince) */
          inserted.StateProvinceID = Person.StateProvince.StateProvinceID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesTaxRate because Person.StateProvince does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tD_SalesTerritory ON Sales.SalesTerritory FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on SalesTerritory */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.SalesTerritory  Person.StateProvince on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="0007d915", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Person", CHILD_TABLE="StateProvince"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_StateProvince_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
    IF EXISTS (
      SELECT * FROM deleted,Person.StateProvince
      WHERE
        /*  %JoinFKPK(Person.StateProvince,deleted," = "," AND") */
        Person.StateProvince.TerritoryID = deleted.TerritoryID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.SalesTerritory because Person.StateProvince exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.SalesTerritory  Sales.SalesTerritoryHistory on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesTerritoryHistory"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesTerritoryHistory_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesTerritoryHistory
      WHERE
        /*  %JoinFKPK(Sales.SalesTerritoryHistory,deleted," = "," AND") */
        Sales.SalesTerritoryHistory.TerritoryID = deleted.TerritoryID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.SalesTerritory because Sales.SalesTerritoryHistory exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.SalesTerritory  Sales.SalesPerson on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesPerson"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesPerson_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesPerson
      WHERE
        /*  %JoinFKPK(Sales.SalesPerson,deleted," = "," AND") */
        Sales.SalesPerson.TerritoryID = deleted.TerritoryID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.SalesTerritory because Sales.SalesPerson exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.SalesTerritory  Sales.SalesOrderHeader on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeader
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeader,deleted," = "," AND") */
        Sales.SalesOrderHeader.TerritoryID = deleted.TerritoryID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.SalesTerritory because Sales.SalesOrderHeader exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.SalesTerritory  Sales.Customer on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Sales", CHILD_TABLE="Customer"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Customer_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.Customer
      WHERE
        /*  %JoinFKPK(Sales.Customer,deleted," = "," AND") */
        Sales.Customer.TerritoryID = deleted.TerritoryID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.SalesTerritory because Sales.Customer exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.CountryRegion  Sales.SalesTerritory on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="CountryRegion"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesTerritory"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesTerritory_CountryRegion_CountryRegionCode", FK_COLUMNS="CountryRegionCode" */
    IF EXISTS (SELECT * FROM deleted,Person.CountryRegion
      WHERE
        /* %JoinFKPK(deleted,Person.CountryRegion," = "," AND") */
        deleted.CountryRegionCode = Person.CountryRegion.CountryRegionCode AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesTerritory
          WHERE
            /* %JoinFKPK(Sales.SalesTerritory,Person.CountryRegion," = "," AND") */
            Sales.SalesTerritory.CountryRegionCode = Person.CountryRegion.CountryRegionCode
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesTerritory because Person.CountryRegion exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_SalesTerritory ON Sales.SalesTerritory FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesTerritory */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insTerritoryID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.SalesTerritory  Person.StateProvince on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00083de1", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Person", CHILD_TABLE="StateProvince"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_StateProvince_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(TerritoryID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Person.StateProvince
      WHERE
        /*  %JoinFKPK(Person.StateProvince,deleted," = "," AND") */
        Person.StateProvince.TerritoryID = deleted.TerritoryID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.SalesTerritory because Person.StateProvince exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.SalesTerritory  Sales.SalesTerritoryHistory on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesTerritoryHistory"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesTerritoryHistory_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(TerritoryID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesTerritoryHistory
      WHERE
        /*  %JoinFKPK(Sales.SalesTerritoryHistory,deleted," = "," AND") */
        Sales.SalesTerritoryHistory.TerritoryID = deleted.TerritoryID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.SalesTerritory because Sales.SalesTerritoryHistory exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.SalesTerritory  Sales.SalesPerson on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesPerson"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesPerson_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(TerritoryID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesPerson
      WHERE
        /*  %JoinFKPK(Sales.SalesPerson,deleted," = "," AND") */
        Sales.SalesPerson.TerritoryID = deleted.TerritoryID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.SalesTerritory because Sales.SalesPerson exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.SalesTerritory  Sales.SalesOrderHeader on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderHeader"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderHeader_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(TerritoryID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderHeader
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderHeader,deleted," = "," AND") */
        Sales.SalesOrderHeader.TerritoryID = deleted.TerritoryID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.SalesTerritory because Sales.SalesOrderHeader exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.SalesTerritory  Sales.Customer on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Sales", CHILD_TABLE="Customer"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Customer_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(TerritoryID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.Customer
      WHERE
        /*  %JoinFKPK(Sales.Customer,deleted," = "," AND") */
        Sales.Customer.TerritoryID = deleted.TerritoryID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.SalesTerritory because Sales.Customer exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.CountryRegion  Sales.SalesTerritory on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="CountryRegion"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesTerritory"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesTerritory_CountryRegion_CountryRegionCode", FK_COLUMNS="CountryRegionCode" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(CountryRegionCode)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.CountryRegion
        WHERE
          /* %JoinFKPK(inserted,Person.CountryRegion) */
          inserted.CountryRegionCode = Person.CountryRegion.CountryRegionCode
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesTerritory because Person.CountryRegion does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tD_SalesTerritoryHistory ON Sales.SalesTerritoryHistory FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on SalesTerritoryHistory */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.SalesTerritory  Sales.SalesTerritoryHistory on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="000362c2", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesTerritoryHistory"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesTerritoryHistory_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
    IF EXISTS (SELECT * FROM deleted,Sales.SalesTerritory
      WHERE
        /* %JoinFKPK(deleted,Sales.SalesTerritory," = "," AND") */
        deleted.TerritoryID = Sales.SalesTerritory.TerritoryID AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesTerritoryHistory
          WHERE
            /* %JoinFKPK(Sales.SalesTerritoryHistory,Sales.SalesTerritory," = "," AND") */
            Sales.SalesTerritoryHistory.TerritoryID = Sales.SalesTerritory.TerritoryID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesTerritoryHistory because Sales.SalesTerritory exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.SalesPerson  Sales.SalesTerritoryHistory on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesPerson"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesTerritoryHistory"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesTerritoryHistory_SalesPerson_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (SELECT * FROM deleted,Sales.SalesPerson
      WHERE
        /* %JoinFKPK(deleted,Sales.SalesPerson," = "," AND") */
        deleted.BusinessEntityID = Sales.SalesPerson.BusinessEntityID AND
        NOT EXISTS (
          SELECT * FROM Sales.SalesTerritoryHistory
          WHERE
            /* %JoinFKPK(Sales.SalesTerritoryHistory,Sales.SalesPerson," = "," AND") */
            Sales.SalesTerritoryHistory.BusinessEntityID = Sales.SalesPerson.BusinessEntityID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SalesTerritoryHistory because Sales.SalesPerson exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_SalesTerritoryHistory ON Sales.SalesTerritoryHistory FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SalesTerritoryHistory */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insBusinessEntityID int, 
           @insTerritoryID int, 
           @insStartDate datetime,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.SalesTerritory  Sales.SalesTerritoryHistory on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00034973", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesTerritoryHistory"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesTerritoryHistory_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(TerritoryID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.SalesTerritory
        WHERE
          /* %JoinFKPK(inserted,Sales.SalesTerritory) */
          inserted.TerritoryID = Sales.SalesTerritory.TerritoryID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesTerritoryHistory because Sales.SalesTerritory does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.SalesPerson  Sales.SalesTerritoryHistory on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesPerson"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesTerritoryHistory"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesTerritoryHistory_SalesPerson_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.SalesPerson
        WHERE
          /* %JoinFKPK(inserted,Sales.SalesPerson) */
          inserted.BusinessEntityID = Sales.SalesPerson.BusinessEntityID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SalesTerritoryHistory because Sales.SalesPerson does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tD_SpecialOffer ON Sales.SpecialOffer FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on SpecialOffer */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.SpecialOffer  Sales.SpecialOfferProduct on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="0001447a", PARENT_OWNER="Sales", PARENT_TABLE="SpecialOffer"
    CHILD_OWNER="Sales", CHILD_TABLE="SpecialOfferProduct"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SpecialOfferProduct_SpecialOffer_SpecialOfferID", FK_COLUMNS="SpecialOfferID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.SpecialOfferProduct
      WHERE
        /*  %JoinFKPK(Sales.SpecialOfferProduct,deleted," = "," AND") */
        Sales.SpecialOfferProduct.SpecialOfferID = deleted.SpecialOfferID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.SpecialOffer because Sales.SpecialOfferProduct exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_SpecialOffer ON Sales.SpecialOffer FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SpecialOffer */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insSpecialOfferID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.SpecialOffer  Sales.SpecialOfferProduct on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00016c24", PARENT_OWNER="Sales", PARENT_TABLE="SpecialOffer"
    CHILD_OWNER="Sales", CHILD_TABLE="SpecialOfferProduct"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SpecialOfferProduct_SpecialOffer_SpecialOfferID", FK_COLUMNS="SpecialOfferID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(SpecialOfferID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SpecialOfferProduct
      WHERE
        /*  %JoinFKPK(Sales.SpecialOfferProduct,deleted," = "," AND") */
        Sales.SpecialOfferProduct.SpecialOfferID = deleted.SpecialOfferID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.SpecialOffer because Sales.SpecialOfferProduct exists.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tD_SpecialOfferProduct ON Sales.SpecialOfferProduct FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on SpecialOfferProduct */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.SpecialOfferProduct  Sales.SalesOrderDetail on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00032c18", PARENT_OWNER="Sales", PARENT_TABLE="SpecialOfferProduct"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderDetail"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderDetail_SpecialOfferProduct_SpecialOfferIDProductID", FK_COLUMNS="SpecialOfferID""ProductID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderDetail
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderDetail,deleted," = "," AND") */
        Sales.SalesOrderDetail.SpecialOfferID = deleted.SpecialOfferID AND
        Sales.SalesOrderDetail.ProductID = deleted.ProductID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.SpecialOfferProduct because Sales.SalesOrderDetail exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.SpecialOffer  Sales.SpecialOfferProduct on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SpecialOffer"
    CHILD_OWNER="Sales", CHILD_TABLE="SpecialOfferProduct"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SpecialOfferProduct_SpecialOffer_SpecialOfferID", FK_COLUMNS="SpecialOfferID" */
    IF EXISTS (SELECT * FROM deleted,Sales.SpecialOffer
      WHERE
        /* %JoinFKPK(deleted,Sales.SpecialOffer," = "," AND") */
        deleted.SpecialOfferID = Sales.SpecialOffer.SpecialOfferID AND
        NOT EXISTS (
          SELECT * FROM Sales.SpecialOfferProduct
          WHERE
            /* %JoinFKPK(Sales.SpecialOfferProduct,Sales.SpecialOffer," = "," AND") */
            Sales.SpecialOfferProduct.SpecialOfferID = Sales.SpecialOffer.SpecialOfferID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.SpecialOfferProduct because Sales.SpecialOffer exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_SpecialOfferProduct ON Sales.SpecialOfferProduct FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on SpecialOfferProduct */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insSpecialOfferID int, 
           @insProductID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.SpecialOfferProduct  Sales.SalesOrderDetail on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="000353f2", PARENT_OWNER="Sales", PARENT_TABLE="SpecialOfferProduct"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesOrderDetail"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesOrderDetail_SpecialOfferProduct_SpecialOfferIDProductID", FK_COLUMNS="SpecialOfferID""ProductID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(SpecialOfferID) OR
    UPDATE(ProductID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesOrderDetail
      WHERE
        /*  %JoinFKPK(Sales.SalesOrderDetail,deleted," = "," AND") */
        Sales.SalesOrderDetail.SpecialOfferID = deleted.SpecialOfferID AND
        Sales.SalesOrderDetail.ProductID = deleted.ProductID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.SpecialOfferProduct because Sales.SalesOrderDetail exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.SpecialOffer  Sales.SpecialOfferProduct on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SpecialOffer"
    CHILD_OWNER="Sales", CHILD_TABLE="SpecialOfferProduct"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SpecialOfferProduct_SpecialOffer_SpecialOfferID", FK_COLUMNS="SpecialOfferID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(SpecialOfferID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.SpecialOffer
        WHERE
          /* %JoinFKPK(inserted,Sales.SpecialOffer) */
          inserted.SpecialOfferID = Sales.SpecialOffer.SpecialOfferID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.SpecialOfferProduct because Sales.SpecialOffer does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tD_StateProvince ON Person.StateProvince FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on StateProvince */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Person.StateProvince  Sales.SalesTaxRate on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="0005a579", PARENT_OWNER="Person", PARENT_TABLE="StateProvince"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesTaxRate"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesTaxRate_StateProvince_StateProvinceID", FK_COLUMNS="StateProvinceID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesTaxRate
      WHERE
        /*  %JoinFKPK(Sales.SalesTaxRate,deleted," = "," AND") */
        Sales.SalesTaxRate.StateProvinceID = deleted.StateProvinceID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.StateProvince because Sales.SalesTaxRate exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.StateProvince  Person.Address on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="StateProvince"
    CHILD_OWNER="Person", CHILD_TABLE="Address"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Address_StateProvince_StateProvinceID", FK_COLUMNS="StateProvinceID" */
    IF EXISTS (
      SELECT * FROM deleted,Person.Address
      WHERE
        /*  %JoinFKPK(Person.Address,deleted," = "," AND") */
        Person.Address.StateProvinceID = deleted.StateProvinceID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.StateProvince because Person.Address exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.SalesTerritory  Person.StateProvince on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Person", CHILD_TABLE="StateProvince"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_StateProvince_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
    IF EXISTS (SELECT * FROM deleted,Sales.SalesTerritory
      WHERE
        /* %JoinFKPK(deleted,Sales.SalesTerritory," = "," AND") */
        deleted.TerritoryID = Sales.SalesTerritory.TerritoryID AND
        NOT EXISTS (
          SELECT * FROM Person.StateProvince
          WHERE
            /* %JoinFKPK(Person.StateProvince,Sales.SalesTerritory," = "," AND") */
            Person.StateProvince.TerritoryID = Sales.SalesTerritory.TerritoryID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Person.StateProvince because Sales.SalesTerritory exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.CountryRegion  Person.StateProvince on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="CountryRegion"
    CHILD_OWNER="Person", CHILD_TABLE="StateProvince"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_StateProvince_CountryRegion_CountryRegionCode", FK_COLUMNS="CountryRegionCode" */
    IF EXISTS (SELECT * FROM deleted,Person.CountryRegion
      WHERE
        /* %JoinFKPK(deleted,Person.CountryRegion," = "," AND") */
        deleted.CountryRegionCode = Person.CountryRegion.CountryRegionCode AND
        NOT EXISTS (
          SELECT * FROM Person.StateProvince
          WHERE
            /* %JoinFKPK(Person.StateProvince,Person.CountryRegion," = "," AND") */
            Person.StateProvince.CountryRegionCode = Person.CountryRegion.CountryRegionCode
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Person.StateProvince because Person.CountryRegion exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tU_StateProvince ON Person.StateProvince FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on StateProvince */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insStateProvinceID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.StateProvince  Sales.SalesTaxRate on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="0005e443", PARENT_OWNER="Person", PARENT_TABLE="StateProvince"
    CHILD_OWNER="Sales", CHILD_TABLE="SalesTaxRate"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_SalesTaxRate_StateProvince_StateProvinceID", FK_COLUMNS="StateProvinceID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(StateProvinceID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.SalesTaxRate
      WHERE
        /*  %JoinFKPK(Sales.SalesTaxRate,deleted," = "," AND") */
        Sales.SalesTaxRate.StateProvinceID = deleted.StateProvinceID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.StateProvince because Sales.SalesTaxRate exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.StateProvince  Person.Address on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="StateProvince"
    CHILD_OWNER="Person", CHILD_TABLE="Address"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Address_StateProvince_StateProvinceID", FK_COLUMNS="StateProvinceID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(StateProvinceID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Person.Address
      WHERE
        /*  %JoinFKPK(Person.Address,deleted," = "," AND") */
        Person.Address.StateProvinceID = deleted.StateProvinceID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.StateProvince because Person.Address exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.SalesTerritory  Person.StateProvince on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesTerritory"
    CHILD_OWNER="Person", CHILD_TABLE="StateProvince"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_StateProvince_SalesTerritory_TerritoryID", FK_COLUMNS="TerritoryID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(TerritoryID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.SalesTerritory
        WHERE
          /* %JoinFKPK(inserted,Sales.SalesTerritory) */
          inserted.TerritoryID = Sales.SalesTerritory.TerritoryID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Person.StateProvince because Sales.SalesTerritory does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.CountryRegion  Person.StateProvince on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="CountryRegion"
    CHILD_OWNER="Person", CHILD_TABLE="StateProvince"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_StateProvince_CountryRegion_CountryRegionCode", FK_COLUMNS="CountryRegionCode" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(CountryRegionCode)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.CountryRegion
        WHERE
          /* %JoinFKPK(inserted,Person.CountryRegion) */
          inserted.CountryRegionCode = Person.CountryRegion.CountryRegionCode
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Person.StateProvince because Person.CountryRegion does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tD_Store ON Sales.Store FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on Store */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Sales.Store  Sales.Customer on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00042b0b", PARENT_OWNER="Sales", PARENT_TABLE="Store"
    CHILD_OWNER="Sales", CHILD_TABLE="Customer"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Customer_Store_StoreID", FK_COLUMNS="StoreID" */
    IF EXISTS (
      SELECT * FROM deleted,Sales.Customer
      WHERE
        /*  %JoinFKPK(Sales.Customer,deleted," = "," AND") */
        Sales.Customer.StoreID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Sales.Store because Sales.Customer exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Sales.SalesPerson  Sales.Store on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesPerson"
    CHILD_OWNER="Sales", CHILD_TABLE="Store"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Store_SalesPerson_SalesPersonID", FK_COLUMNS="SalesPersonID" */
    IF EXISTS (SELECT * FROM deleted,Sales.SalesPerson
      WHERE
        /* %JoinFKPK(deleted,Sales.SalesPerson," = "," AND") */
        deleted.SalesPersonID = Sales.SalesPerson.BusinessEntityID AND
        NOT EXISTS (
          SELECT * FROM Sales.Store
          WHERE
            /* %JoinFKPK(Sales.Store,Sales.SalesPerson," = "," AND") */
            Sales.Store.SalesPersonID = Sales.SalesPerson.BusinessEntityID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.Store because Sales.SalesPerson exists.'
      GOTO error
    END

    /* erwin Builtin Trigger */
    /* Person.BusinessEntity  Sales.Store on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="BusinessEntity"
    CHILD_OWNER="Sales", CHILD_TABLE="Store"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Store_BusinessEntity_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
    IF EXISTS (SELECT * FROM deleted,Person.BusinessEntity
      WHERE
        /* %JoinFKPK(deleted,Person.BusinessEntity," = "," AND") */
        deleted.BusinessEntityID = Person.BusinessEntity.BusinessEntityID AND
        NOT EXISTS (
          SELECT * FROM Sales.Store
          WHERE
            /* %JoinFKPK(Sales.Store,Person.BusinessEntity," = "," AND") */
            Sales.Store.BusinessEntityID = Person.BusinessEntity.BusinessEntityID
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last Sales.Store because Person.BusinessEntity exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Sales.tU_Store ON Sales.Store FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on Store */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @insBusinessEntityID int,
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Sales.Store  Sales.Customer on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="0004815b", PARENT_OWNER="Sales", PARENT_TABLE="Store"
    CHILD_OWNER="Sales", CHILD_TABLE="Customer"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Customer_Store_StoreID", FK_COLUMNS="StoreID" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,Sales.Customer
      WHERE
        /*  %JoinFKPK(Sales.Customer,deleted," = "," AND") */
        Sales.Customer.StoreID = deleted.BusinessEntityID
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Sales.Store because Sales.Customer exists.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Sales.SalesPerson  Sales.Store on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Sales", PARENT_TABLE="SalesPerson"
    CHILD_OWNER="Sales", CHILD_TABLE="Store"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Store_SalesPerson_SalesPersonID", FK_COLUMNS="SalesPersonID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(SalesPersonID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Sales.SalesPerson
        WHERE
          /* %JoinFKPK(inserted,Sales.SalesPerson) */
          inserted.SalesPersonID = Sales.SalesPerson.BusinessEntityID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    select @nullcnt = count(*) from inserted where
      inserted.SalesPersonID IS NULL
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.Store because Sales.SalesPerson does not exist.'
      GOTO error
    END
  END

  /* erwin Builtin Trigger */
  /* Person.BusinessEntity  Sales.Store on child update no action */
  /* ERWIN_RELATION:CHECKSUM="00000000", PARENT_OWNER="Person", PARENT_TABLE="BusinessEntity"
    CHILD_OWNER="Sales", CHILD_TABLE="Store"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="FK_Store_BusinessEntity_BusinessEntityID", FK_COLUMNS="BusinessEntityID" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(BusinessEntityID)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.BusinessEntity
        WHERE
          /* %JoinFKPK(inserted,Person.BusinessEntity) */
          inserted.BusinessEntityID = Person.BusinessEntity.BusinessEntityID
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update Sales.Store because Person.BusinessEntity does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tD_test_table ON Person.test_table FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on test_table */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Person.test_table  emails on parent delete no action */
    /* ERWIN_RELATION:CHECKSUM="00011721", PARENT_OWNER="Person", PARENT_TABLE="test_table"
    CHILD_OWNER="", CHILD_TABLE="emails"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_83", FK_COLUMNS="test_table_col1" */
    IF EXISTS (
      SELECT * FROM deleted,emails
      WHERE
        /*  %JoinFKPK(emails,deleted," = "," AND") */
        emails.test_table_col1 = deleted.test_table_col1
    )
    BEGIN
      SELECT @errno  = 30001,
             @errmsg = 'Cannot delete Person.test_table because emails exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER Person.tU_test_table ON Person.test_table FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on test_table */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           @instest_table_col1 char(18),
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.test_table  emails on parent update no action */
  /* ERWIN_RELATION:CHECKSUM="0001388e", PARENT_OWNER="Person", PARENT_TABLE="test_table"
    CHILD_OWNER="", CHILD_TABLE="emails"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_83", FK_COLUMNS="test_table_col1" */
  IF
    /* %ParentPK(" OR",UPDATE) */
    UPDATE(test_table_col1)
  BEGIN
    IF EXISTS (
      SELECT * FROM deleted,emails
      WHERE
        /*  %JoinFKPK(emails,deleted," = "," AND") */
        emails.test_table_col1 = deleted.test_table_col1
    )
    BEGIN
      SELECT @errno  = 30005,
             @errmsg = 'Cannot update Person.test_table because emails exists.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER tD_emails ON emails FOR DELETE AS
/* erwin Builtin Trigger */
/* DELETE trigger on emails */
BEGIN
  DECLARE  @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)
    /* erwin Builtin Trigger */
    /* Person.test_table  emails on child delete no action */
    /* ERWIN_RELATION:CHECKSUM="00017a29", PARENT_OWNER="Person", PARENT_TABLE="test_table"
    CHILD_OWNER="", CHILD_TABLE="emails"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_83", FK_COLUMNS="test_table_col1" */
    IF EXISTS (SELECT * FROM deleted,Person.test_table
      WHERE
        /* %JoinFKPK(deleted,Person.test_table," = "," AND") */
        deleted.test_table_col1 = Person.test_table.test_table_col1 AND
        NOT EXISTS (
          SELECT * FROM emails
          WHERE
            /* %JoinFKPK(emails,Person.test_table," = "," AND") */
            emails.test_table_col1 = Person.test_table.test_table_col1
        )
    )
    BEGIN
      SELECT @errno  = 30010,
             @errmsg = 'Cannot delete last emails because Person.test_table exists.'
      GOTO error
    END


    /* erwin Builtin Trigger */
    RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go




CREATE TRIGGER tU_emails ON emails FOR UPDATE AS
/* erwin Builtin Trigger */
/* UPDATE trigger on emails */
BEGIN
  DECLARE  @numrows int,
           @nullcnt int,
           @validcnt int,
           
           @errno   int,
           @severity int,
           @state    int,
           @errmsg  varchar(255)

  SELECT @numrows = @@rowcount
  /* erwin Builtin Trigger */
  /* Person.test_table  emails on child update no action */
  /* ERWIN_RELATION:CHECKSUM="0001b87b", PARENT_OWNER="Person", PARENT_TABLE="test_table"
    CHILD_OWNER="", CHILD_TABLE="emails"
    P2C_VERB_PHRASE="", C2P_VERB_PHRASE="", 
    FK_CONSTRAINT="R_83", FK_COLUMNS="test_table_col1" */
  IF
    /* %ChildFK(" OR",UPDATE) */
    UPDATE(test_table_col1)
  BEGIN
    SELECT @nullcnt = 0
    SELECT @validcnt = count(*)
      FROM inserted,Person.test_table
        WHERE
          /* %JoinFKPK(inserted,Person.test_table) */
          inserted.test_table_col1 = Person.test_table.test_table_col1
    /* %NotnullFK(inserted," IS NULL","select @nullcnt = count(*) from inserted where"," AND") */
    select @nullcnt = count(*) from inserted where
      inserted.test_table_col1 IS NULL
    IF @validcnt + @nullcnt != @numrows
    BEGIN
      SELECT @errno  = 30007,
             @errmsg = 'Cannot update emails because Person.test_table does not exist.'
      GOTO error
    END
  END


  /* erwin Builtin Trigger */
  RETURN
error:
   RAISERROR (@errmsg, -- Message text.
              @severity, -- Severity (0~25).
              @state) -- State (0~255).
    rollback transaction
END

go



